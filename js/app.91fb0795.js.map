{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/UILayer.vue?6236","webpack:///./src/components/Room.vue?16a5","webpack:///./src/lib/preload.js","webpack:///./src/App.vue?d5ab","webpack:///./src/components/Room.vue?9de7","webpack:///src/components/Room.vue","webpack:///./src/components/Room.vue?2c7b","webpack:///./src/components/Room.vue","webpack:///./src/components/Ship.vue?978f","webpack:///src/components/Ship.vue","webpack:///./src/components/Ship.vue?31c9","webpack:///./src/components/Ship.vue","webpack:///./src/components/UILayer.vue?b020","webpack:///./src/components/BGM.vue?555b","webpack:///src/components/BGM.vue","webpack:///./src/components/BGM.vue?be9c","webpack:///./src/components/BGM.vue","webpack:///./src/components/ShipAssigner.vue?a2cc","webpack:///src/components/ShipAssigner.vue","webpack:///./src/components/ShipAssigner.vue?4440","webpack:///./src/components/ShipAssigner.vue","webpack:///src/components/UILayer.vue","webpack:///./src/components/UILayer.vue?48b7","webpack:///./src/components/UILayer.vue","webpack:///./src/components/LoadingScreen.vue?52ad","webpack:///src/components/LoadingScreen.vue","webpack:///./src/components/LoadingScreen.vue?7764","webpack:///./src/components/LoadingScreen.vue","webpack:///./src/components/TitleScreen.vue?481e","webpack:///src/components/TitleScreen.vue","webpack:///./src/components/TitleScreen.vue?5407","webpack:///./src/components/TitleScreen.vue","webpack:///src/App.vue","webpack:///./src/App.vue?d83e","webpack:///./src/App.vue","webpack:///./src/store.js","webpack:///./src/main.js","webpack:///./src/App.vue?60be","webpack:///./src/components/Ship.vue?dbe8","webpack:///./src/components/LoadingScreen.vue?8dcd","webpack:///./src/components/TitleScreen.vue?f14c","webpack:///./src/components/BGM.vue?1a91","webpack:///./src/lib/utils.js","webpack:///./src/components/ShipAssigner.vue?9d5c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","isDevelopment","__dev","__room","naturalWidth","naturalHeight","desk","width","height","wallObject","loading","__combatModeLength","__mobileMode","__minSize","__ship","log","console","logError","warn","Number","pad","str","this","toString","Array","join","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","expression","staticRenderFns","attrs","canvasWidth","canvasHeight","_t","roomWall","roomWindow","roomObject","roomCombatBg","bgmAudio","Audio","loadCounter","loadLimit","ctx","previousWindowInnerHeight","computed","BGMs","selectedBgm","bgmVolume","shipName","combatMode","document","getElementById","innerHeight","innerWidth","watch","newBgm","oldBgm","playBgmAudio","volume","drawBackground","newData","pause","play","canvas","getContext","loadBackground","resizeCanvas","$store","commit","mainMenuBGM","loop","addEventListener","removeEventListener","src","methods","clearRect","loadedItem","dispatchEvent","CustomEvent","imagePath","dispatch","postLoad","onLoad","loadImage","roomDesk","roomWallObject","roomWallObjectAkizuki","roomObjects","calculateWidthFromHeight","drawImage","objectToDraw","getWallObjectToDraw","deskWidth","deskHeight","currentHour","Date","getHours","isDayTime","firstLoad","bgm","combatBgm","oncanplaythrough","currentFile","File","load","English","e","component","shipFileName","_e","path","heightModifier","shipDefaultExpectedPositionRatio","shipCombatExpectedPositionRatio","reqAnimFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","windowHeight","canvasCalculatedWidth","shipXPositionModifier","shipYPositionModifier","shipExpectedPositionRatio","defaultSprite","damagedSprite","audio","damaged","currentEvent","idleTimeout","shipMovementSpeed","isShipAnimationFinished","shipDB","selectedShipName","shipSprite","voiceVolume","useSpecialLines","useSpecialLinesOnly","useBonusLines","useAllModelLines","useIdleLines","idleLineWait","damagedMode","FileName","shipDir","sprite","shipHeight","Math","min","Commands","shipBattleStartEventNames","isArray","SetSecretary","specialList","Special","Wedding","concat","shipBattleEventNames","idleList","Idle","IdleBonus","shipSpecialEventNames","tapList","Tap","TapBonus","Hourly","battleList","Battle","dayTime","BattleDay","BattleNight","battleStartList","BattleStart","BattleStartDay","BattleStartNight","BattleComplete","Sprites","Models","spritesDir","Normal","Damaged","loadShip","onAdd","resetIdleTimeout","windowResizeHandler","onHourly","battleStart","battleEnd","clickOnShip","onended","audioHasEnded","clearTimeout","event","canvasRect","getBoundingClientRect","mousePos","x","y","pixel","getImageData","onTap","callback","exitRight","widthToUse","absoluteBarrier","shipWidth","absoluteBarrierRatio","shipMovementInRatio","initialWidth","startPoint","startPointRatio","enterLeft","animateExitRight","getTime","animateEnterLeft","selectAndPlayEvent","shipBattleCompleteEventNames","now","getMinutes","getSeconds","setTimeout","onIdle","Model","Event","currentVoice","voicesDir","Voice","promise","then","Command","catch","eventType","eventNames","list","getEventDataFromEventNames","floor","random","playCurrentEvent","eventList","shipSpriteModels","models","eventDataList","map","eventName","array","Events","includes","paused","ended","shipIdleEventNames","shipSetSecretaryEventNames","shipTapEventNames","hourlyEvent","shipHourlyEventNames","detail","rewrappedEvent","JSON","parse","stringify","getDatabase","shipNormalImagePath","shipDamagedImagePath","currentHeight","shipCenterY","canvasCenterY","yOffset","shipYPositionOffset","canvasCenterX","shipCenterX","shipExpectedPosition","shipActualPosition","max","xOffset","shipXPositionOffset","spriteToDraw","clearCanvas","drawShip","style","uiWidth","menuOpen","_v","domProps","on","$event","overallSlider","target","stopPropagation","toggleMuteOverall","arguments","overallVolumeMute","_s","overallVolume","bgmSlider","toggleMuteBgm","bgmVolumeMute","seSlider","toggleMuteSe","seVolumeMute","seVolume","voiceSlider","toggleMuteVoice","voiceVolumeMute","class","unchecked","toggleAllModelLines","disabled","toggleBonusLines","toggleSpecialLines","toggleUseSpecialLinesOnly","toggleIdleLines","idleLineWaitSlider","staticStyle","openBgm","hideButtons","toggleHideButtons","shipChanged","closeMenu","genericButtonPress","openSettings","Boolean","belowMin","disableSortieButton","clickable","setButtonHoverState","sortieShip","sortieButtonHover","sortieButtonWidth","disableCompositionButton","bottom","compositionButtonHeight","compositionButtonMinHeight","changeShip","compositionButtonHover","compositionButtonWidth","disableRepairButton","left","compositionButtonMinWidth","repairShip","repairButtonHover","repairButtonWidth","settingsButtonHover","subtitle","subtitleMaxWidth","title","_l","bgmCategoryName","categoryIndex","bgmCategories","source","index","Source","changeSelectedBgm","windowWidth","mobileWidth","Japanese","bgmCategoryOrder","recalculateWidth","elem","getElementsByClassName","scrollIntoView","$emit","prevship","getSprite","currentShipDefaultBanner","nextship","ref","row","rowIndex","last","splitArray","shipSpriteName","ml","currentShipSprites","selected","selectedSpriteName","changeShipAndSprite","Card","shipCardWidth","scrollToSelectedElement","numberOfShipsInRow","currentShip","database","shipNames","$refs","shipAssignerMainContent","currentShipDB","indexOf","keys","filter","defaultBanner","DefaultBanner","Banner","changeCurrentShip","generateSplitArray","currentShipSpritesKeys","filename","ship","mainContent","scrollTop","currentShipNameIndex","scrollMainContentToTop","spritesArray","shipSprites","spriteDB","generatedArray","spriteList","sort","a","b","Index","components","BGM","ShipAssigner","disableShipButtons","disableShipComposition","disableShipRepair","disableShipSortie","seDB","finalSeVolume","main","belowMinWidth","belowMinHeight","createSeAudio","resizeUI","suppressAudio","playSeAudio","openMenu","buttonName","state","relation","seName","currentTime","showFadeScreen","loaderWidth","screenWidth","disclaimer","loadLine","titleDB","getRandomEventFileNameFromList","TitleCall02","calculateGifWidth","playLoadLine","showFadeScreenFunc","_m","logoWidth","logoMaxHeight","maxWidth","logoMargin","startButtonHover","startGame","screenHeight","startButtonClicked","kancolleStartLine","calculateScreenWidth","TitleCall01","imageList","forEach","img","Room","Ship","UILayer","LoadingScreen","TitleScreen","titleScreen","loadingScreen","roomLoaded","shipLoaded","lineEnded","exitTitleScreen","startLoad","endLoad","item","onRoomLoad","onShipLoad","onLoadLineEnded","config","productionTip","use","ships","akizuki","haguro","sendai","taigei","yamato","combatModeInterval","store","Store","selectedBgmName","loadingMode","getters","SEs","se","titleLines","Categories","CategoryOrder","mutations","dateTime","saveSetting","timeLeft","setInterval","clearInterval","actions","loadSettings","setters","variableName","loadedData","loadSetting","populateData","databaseData","Name","Promise","resolve","image","Image","onload","onerror","loadAudio","audioPath","invokeHourlyEvent","hour","hourly","startIntervalTimer","previousHour","rootState","preloadShipCards","spritesList","spriteName","card","banner","bannerPath","h","App","$mount","fs","deleteAllRecursive","dirpath","existsSync","rmdirSync","recursive","localStorage","setItem","getItem"],"mappings":"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","file":"js/app.91fb0795.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UILayer.vue?vue&type=style&index=0&id=477c36c2&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=style&index=0&id=7bfb0bfb&lang=less&scoped=true&\"","const isDevelopment = process.env.NODE_ENV !== 'production';\n\nwindow.__dev = isDevelopment;\nwindow.__room = {\n  naturalWidth: 800,\n  naturalHeight: 480,\n  desk: {\n    width: 362,\n    height: 346,\n  },\n  wallObject: {\n    width: 144,\n    height: 178,\n  },\n  loading: {\n    width: 145,\n    height: 145,\n  }\n};\nwindow.__combatModeLength = 1 * 60 * 1000; // In milliseconds\nwindow.__mobileMode = {\n  width: 600,\n};\nwindow.__minSize = {\n  width: 300,\n  height: 450,\n};\nwindow.__ship = \"ship\";\n\nif (isDevelopment) {\n  window.log = console.log.bind(window.console);\n  window.logError = console.warn.bind(window.console);\n} else {\n  window.log = () => { };\n  window.logError = () => { };\n}\n\nNumber.prototype.pad = function (n) {\n  try {\n    let str = this.toString();\n    return new Array(n + 1 - str.length).join('0') + str;\n  } catch {\n    return this;\n  }\n};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[(_vm.titleScreen)?_c('TitleScreen'):_c('div',{staticClass:\"app-contents\"},[_c('Room',[_c('Ship')],1),_c('div',{staticClass:\"ui-container center-div\"},[_c('UILayer')],1)],1),_c('LoadingScreen',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadingScreen),expression:\"loadingScreen\"}]})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"room-container center-div\"},[_c('div',{staticClass:\"room fixed\"},[_c('canvas',{attrs:{\"id\":\"room-canvas\",\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight}}),_c('div',{staticClass:\"absolute foreground\"},[_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"room-container center-div\">\n    <div class=\"room fixed\">\n      <canvas id=\"room-canvas\" :width=\"canvasWidth\" :height=\"canvasHeight\" />\n      <div class=\"absolute foreground\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<style lang=\"less\" scoped>\n.room-container {\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n\n  .room {\n    height: 100%;\n\n    .foreground {\n      user-select: none;\n      -moz-user-select: none;\n      -webkit-user-drag: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n</style>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"Room\",\n  data() {\n    return {\n      roomWall: null,\n      roomWindow: null,\n      roomObject: null,\n      roomCombatBg: null,\n\n      bgmAudio: new Audio(),\n\n      loadCounter: 0,\n      loadLimit: 7,\n\n      ctx: null, // Canvas context\n      previousWindowInnerHeight: 0\n    };\n  },\n  computed: {\n    ...mapGetters({\n      BGMs: \"BGMs\",\n      selectedBgm: \"selectedBgm\",\n      bgmVolume: \"bgmVolume\",\n      shipName: \"selectedShipName\",\n      loading: \"loadingMode\",\n      combatMode: \"combatMode\"\n    }),\n    canvas() {\n      return document.getElementById(\"room-canvas\");\n    },\n    canvasHeight() {\n      return `${window.innerHeight}px`;\n    },\n    canvasWidth() {\n      return `${window.innerWidth}px`;\n    },\n    mainMenuBGM() {\n      return this.BGMs ? this.BGMs[\"Main Menu\"] : null;\n    },\n    combatStandbyBgm() {\n      return this.BGMs ? this.BGMs[\"Sortie / PvP / Expedition\"] : null;\n    }\n  },\n  watch: {\n    selectedBgm(newBgm, oldBgm) {\n      log(\"SelectedBgm change\", oldBgm, newBgm);\n      if (this.bgmAudio && this.selectedBgm && !this.loading) {\n        this.playBgmAudio();\n      }\n    },\n    bgmVolume() {\n      this.bgmAudio.volume = this.bgmVolume;\n    },\n    shipName() {\n      this.drawBackground();\n    },\n    loading(newData) {\n      if (!this.bgmAudio) {\n        return;\n      }\n      if (newData) {\n        // If true\n        this.bgmAudio.pause();\n      } else {\n        this.bgmAudio.play();\n      }\n    },\n    combatMode() {\n      this.playBgmAudio();\n      this.drawBackground();\n    }\n  },\n  async mounted() {\n    this.ctx = this.canvas.getContext(\"2d\");\n    await this.loadBackground();\n    this.resizeCanvas();\n\n    if (!this.selectedBgm) {\n      this.$store.commit(\"setSelectedBgm\", this.mainMenuBGM);\n    }\n\n    this.bgmAudio.volume = this.bgmVolume;\n    this.bgmAudio.loop = true;\n    this.playBgmAudio(true); // Let the watcher activate it for us\n\n    window.addEventListener(\"resize\", this.resizeCanvas);\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.resizeCanvas);\n    if (this.bgmAudio) {\n      this.bgmAudio.pause();\n      this.bgmAudio.src = \"\";\n      this.bgmAudio = null;\n    }\n  },\n  methods: {\n    clearCanvas() {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    },\n    onLoad(loadedItem) {\n      this.loadCounter++;\n      console.log(\"[Room] Loaded\", loadedItem);\n      if (this.loadCounter >= this.loadLimit) {\n        window.dispatchEvent(new CustomEvent(\"roomLoaded\"));\n      }\n    },\n    async loadImage(imagePath) {\n      if (!imagePath) return;\n      return await this.$store.dispatch('loadImage', {\n          imagePath,\n          postLoad: () => {\n            this.onLoad(imagePath);\n          },\n      });\n    },\n    async loadBackground() {\n      this.roomWall = await this.loadImage(\"backgrounds/room_background.png\");\n      this.roomWindow = await this.loadImage(\"backgrounds/room_window.png\");\n      this.roomDesk = await this.loadImage(\"backgrounds/Mahogany_desk.png\");\n      this.roomWallObject = await this.loadImage(\n        \"backgrounds/Old_world_map.png\"\n      );\n      this.roomWallObjectAkizuki = this.roomObjects = await this.loadImage(\n        \"backgrounds/Spring_Type_B_sisters_panel.png\"\n      );\n      this.roomCombatBg = await this.loadImage(\"img/bg_h.png\");\n      console.log(\"[Room] Images loaded\");\n    },\n    // To get the correct ratio\n    calculateWidthFromHeight(height) {\n      return (height * __room.naturalWidth) / (__room.naturalHeight * 1.0);\n    },\n    drawBackground() {\n      let height = window.innerHeight;\n      let width = this.calculateWidthFromHeight(height);\n\n      if (this.combatMode) {\n        this.ctx.drawImage(this.roomCombatBg, 0, 0, width, height);\n        return;\n      }\n\n      this.ctx.drawImage(this.roomWall, 0, 0, width, height);\n      this.ctx.drawImage(this.roomWindow, 0, 0, width, height);\n\n      // Draw wall object\n      let objectToDraw = this.getWallObjectToDraw();\n      this.ctx.drawImage(\n        objectToDraw,\n        0,\n        0,\n        (__room.wallObject.width / __room.naturalWidth) * width,\n        (__room.wallObject.height / __room.naturalHeight) * height\n      );\n\n      // Draw desk\n      let deskWidth = (__room.desk.width / __room.naturalWidth) * width;\n      let deskHeight = (__room.desk.height / __room.naturalHeight) * height;\n\n      this.ctx.drawImage(\n        this.roomDesk,\n        0,\n        height - deskHeight,\n        deskWidth,\n        deskHeight\n      );\n    },\n    getWallObjectToDraw() {\n      return this.shipName == \"Akizuki\" ||\n        this.shipName == \"Teruzuki\" ||\n        this.shipName == \"Hatsuzuki\" ||\n        this.shipName == \"Suzutsuki\"\n        ? this.roomWallObjectAkizuki\n        : this.roomWallObject;\n    },\n    isDayTime() {\n      let currentHour = new Date().getHours();\n      return currentHour >= 7 && currentHour < 19;\n    },\n    combatBgm() {\n      if (!this.BGMs) {\n        return null;\n      }\n      return this.isDayTime ? this.BGMs[\"Battle\"] : this.BGMs[\"Night Battle\"];\n    },\n    playBgmAudio(firstLoad = false) {\n      if (this.bgmAudio) {\n        this.bgmAudio.pause();\n      }\n\n      // Set the bgm to play\n      let bgm = this.selectedBgm;\n      if (this.combatMode) {\n        bgm = this.combatBgm();\n      }\n\n      if (!bgm) {\n        return;\n      }\n\n      if (firstLoad) {\n        this.bgmAudio.oncanplaythrough = () => {\n          this.onLoad(currentFile);\n        };\n      } else {\n        this.bgmAudio.oncanplaythrough = null;\n      }\n\n      let currentFile = bgm.File;\n      this.bgmAudio.src = currentFile;\n      this.bgmAudio.load();\n      if (!this.loading) {\n        window.log(`Playing BGM [${bgm.English}].`, bgm);\n        this.bgmAudio.play();\n      }\n    },\n    resizeCanvas() {\n      if (window.innerHeight == this.previousWindowInnerHeight) {\n        return;\n      }\n\n      //window.log(`Room resize: ${this.canvas.width}, ${this.canvas.height}`);\n      try {\n        // No need to clear because the background will always be 100% redrawn over\n        this.canvas.height = window.innerHeight;\n        this.canvas.width = this.calculateWidthFromHeight(window.innerHeight);\n        this.drawBackground();\n        this.previousWindowInnerHeight = window.innerHeight;\n      } catch (e) {\n        window.logError(\"[Room] Error in resize. \", e);\n      }\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Room.vue?vue&type=template&id=7bfb0bfb&scoped=true&\"\nimport script from \"./Room.vue?vue&type=script&lang=js&\"\nexport * from \"./Room.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Room.vue?vue&type=style&index=0&id=7bfb0bfb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bfb0bfb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ship\"},[(_vm.shipName)?_c('canvas',{attrs:{\"id\":(\"ship-\" + _vm.shipFileName),\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ship\">\n    <canvas\n      v-if=\"shipName\"\n      :id=\"`ship-${shipFileName}`\"\n      :width=\"canvasWidth\"\n      :height=\"canvasHeight\"\n    />\n  </div>\n</template>\n\n\n<style lang=\"less\" scoped>\n.ship {\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nconst path = require(\"path\");\nconst heightModifier = 1.3; // of total canvas height\nconst shipDefaultExpectedPositionRatio = 0.8;\nconst shipCombatExpectedPositionRatio = 0.3;\nconst reqAnimFrame =\n  window.requestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.msRequestAnimationFrame ||\n  window.oRequestAnimationFrame;\n\nexport default {\n  name: \"Ship\",\n  data() {\n    return {\n      windowHeight: 0,\n      canvasCalculatedWidth: 0,\n\n      // % based. Allows ship to 'hide' out of the window\n      shipXPositionModifier: 0,\n      shipYPositionModifier: 0,\n      shipExpectedPositionRatio: shipDefaultExpectedPositionRatio,\n\n      defaultSprite: null,\n      damagedSprite: null,\n      audio: new Audio(),\n\n      damaged: false,\n      currentEvent: null,\n\n      idleTimeout: null,\n      shipMovementSpeed: 5,\n\n      isShipAnimationFinished: true,\n\n      loadCounter: 0,\n      loadLimit: 2,\n      firstLoad: false,\n\n      shipDB: null,\n      ctx: null // Canvas context\n    };\n  },\n  computed: {\n    ...mapGetters({\n      selectedShipName: \"selectedShipName\",\n      shipSprite: \"selectedSpriteName\",\n      voiceVolume: \"voiceVolume\",\n\n      useSpecialLines: \"useSpecialLines\",\n      useSpecialLinesOnly: \"useSpecialLinesOnly\",\n      useBonusLines: \"useBonusLines\",\n      useAllModelLines: \"useAllModelLines\",\n      useIdleLines: \"useIdleLines\",\n\n      idleLineWait: \"idleLineWait\",\n\n      loading: \"loadingMode\",\n      combatMode: \"combatMode\",\n      damagedMode: \"damagedMode\"\n    }),\n    shipName() {\n      return this.selectedShipName;\n    },\n    shipFileName() {\n      if (!this.shipName || !this.shipDB) return null;\n      return this.shipDB.FileName;\n    },\n    shipDir() {\n      if (!this.shipName || !this.shipFileName) return null;\n      return path.join(__ship, this.shipFileName);\n    },\n    spritesDir() {\n      if (!this.shipName) return null;\n      return path.join(this.shipDir, \"sprites\");\n    },\n    voicesDir() {\n      if (!this.shipName) return null;\n      return path.join(this.shipDir, \"voices\");\n    },\n    canvas() {\n      return document.getElementById(`ship-${this.shipFileName}`);\n    },\n    canvasHeight() {\n      return `${window.innerHeight}px`;\n    },\n    canvasWidth() {\n      return `${window.innerWidth}px`;\n    },\n\n    shipHeight() {\n      return this.windowHeight * heightModifier;\n    },\n    shipWidth() {\n      let sprite = this.damagedMode ? this.damagedSprite : this.defaultSprite;\n      if (!sprite) return 0;\n      return this.calculateWidthFromHeight(\n        sprite.naturalWidth,\n        sprite.naturalHeight,\n        this.shipHeight\n      );\n    },\n\n    shipXPositionOffset() {\n      return (\n        this.shipXPositionModifier *\n        Math.min(this.canvasCalculatedWidth, window.innerWidth)\n      );\n    },\n    shipYPositionOffset() {\n      return this.shipYPositionModifier * this.windowHeight;\n    },\n\n    //\n    // Command list\n    //\n    shipCommands() {\n      if (!this.shipDB) return null;\n      try {\n        return this.shipDB.Commands;\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipCommands.\", e);\n      }\n      return null;\n    },\n    // SetSecretary\n    shipSetSecretaryEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n      try {\n        // If in combat mode (takes priority)\n        if (this.combatMode) {\n          return this.shipBattleStartEventNames;\n        }\n\n        return Array.isArray(this.shipDB.Commands.SetSecretary)\n          ? this.shipDB.Commands.SetSecretary\n          : [];\n      } catch (e) {\n        window.logError(\n          \"[Ship] Unexpected error in shipSetSecretaryEventNames.\",\n          e\n        );\n      }\n      return [];\n    },\n    // Special\n    shipSpecialEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands || this.combatMode) return [];\n      try {\n        let specialList = Array.isArray(this.shipDB.Commands.Special)\n          ? this.shipDB.Commands.Special\n          : [];\n        if (Array.isArray(this.shipDB.Commands.Wedding)) {\n          specialList = specialList.concat(this.shipDB.Commands.Wedding);\n        }\n        return specialList;\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipSpecialEventNames.\", e);\n      }\n      return [];\n    },\n    // Idle\n    shipIdleEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n      try {\n        // If in combat mode (takes priority)\n        if (this.combatMode) {\n          return this.shipBattleEventNames;\n        }\n\n        let idleList = Array.isArray(this.shipDB.Commands.Idle)\n          ? this.shipDB.Commands.Idle\n          : [];\n        if (\n          this.useBonusLines &&\n          Array.isArray(this.shipDB.Commands.IdleBonus)\n        ) {\n          idleList = idleList.concat(this.shipDB.Commands.IdleBonus);\n        }\n        return idleList;\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipIdleEventNames.\", e);\n      }\n      return [];\n    },\n    // Tap\n    shipTapEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n\n      try {\n        // If in combat mode (takes priority)\n        if (this.combatMode) {\n          return this.shipBattleEventNames;\n        }\n\n        // If in special mode, return the special mode lines\n        if (this.useSpecialLinesOnly) {\n          return this.shipSpecialEventNames;\n        }\n\n        let tapList = Array.isArray(this.shipDB.Commands.Tap)\n          ? this.shipDB.Commands.Tap\n          : [];\n        if (\n          this.useBonusLines &&\n          Array.isArray(this.shipDB.Commands.TapBonus)\n        ) {\n          tapList = tapList.concat(this.shipDB.Commands.TapBonus);\n        }\n        if (this.useSpecialLines && Array.isArray(this.shipSpecialEventNames)) {\n          tapList = tapList.concat(this.shipSpecialEventNames);\n        }\n        return tapList;\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipTapEventNames.\", e);\n      }\n      return [];\n    },\n    // Hourly\n    shipHourlyEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n      try {\n        return Array.isArray(this.shipDB.Commands.Hourly)\n          ? this.shipDB.Commands.Hourly\n          : [];\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipHourlyEventNames.\", e);\n      }\n      return [];\n    },\n    // Battle\n    shipBattleEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n      try {\n        let battleList = Array.isArray(this.shipDB.Commands.Battle)\n          ? this.shipDB.Commands.Battle\n          : [];\n\n        let dayTime = this.isDayTime();\n        if (dayTime && Array.isArray(this.shipDB.Commands.BattleDay)) {\n          battleList = battleList.concat(this.shipDB.Commands.BattleDay);\n        }\n        if (!dayTime && Array.isArray(this.shipDB.Commands.BattleNight)) {\n          battleList = battleList.concat(this.shipDB.Commands.BattleNight);\n        }\n\n        return battleList;\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipBattleEventNames.\", e);\n      }\n      return [];\n    },\n    // BattleStart\n    shipBattleStartEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n      try {\n        let battleStartList = Array.isArray(this.shipDB.Commands.BattleStart)\n          ? this.shipDB.Commands.BattleStart\n          : [];\n\n        let dayTime = this.isDayTime();\n        if (dayTime && Array.isArray(this.shipDB.Commands.BattleStartDay)) {\n          battleStartList = battleStartList.concat(\n            this.shipDB.Commands.BattleStartDay\n          );\n        }\n        if (!dayTime && Array.isArray(this.shipDB.Commands.BattleStartNight)) {\n          battleStartList = battleStartList.concat(\n            this.shipDB.Commands.BattleStartNight\n          );\n        }\n\n        return battleStartList;\n      } catch (e) {\n        window.logError(\n          \"[Ship] Unexpected error in shipBattleStartEventNames.\",\n          e\n        );\n      }\n      return [];\n    },\n    // BattleComplete\n    shipBattleCompleteEventNames() {\n      if (!this.shipDB || !this.shipDB.Commands) return [];\n\n      try {\n        return Array.isArray(this.shipDB.Commands.BattleComplete)\n          ? this.shipDB.Commands.BattleComplete\n          : [];\n      } catch (e) {\n        window.logError(\n          \"[Ship] Unexpected error in shipBattleCompleteEventNames.\",\n          e\n        );\n      }\n      return [];\n    },\n\n    // Get allowed model types\n    shipSpriteModels() {\n      if (!this.shipDB) return null;\n      try {\n        return this.shipDB.Sprites[this.shipSprite].Models;\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipSpriteModels.\", e);\n      }\n      return null;\n    },\n\n    // Get normal sprite\n    shipNormalImagePath() {\n      if (!this.shipDB) return null;\n      try {\n        return path.join(\n          this.spritesDir,\n          this.shipDB.Sprites[this.shipSprite].Normal\n        );\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipNormalImagePath.\", e);\n      }\n      return null;\n    },\n    // Get damaged sprite\n    shipDamagedImagePath() {\n      if (!this.shipDB) return null;\n      try {\n        return path.join(\n          this.spritesDir,\n          this.shipDB.Sprites[this.shipSprite].Damaged\n        );\n      } catch (e) {\n        window.logError(\"[Ship] Unexpected error in shipDamagedImagePath.\", e);\n      }\n      return null;\n    }\n  },\n  watch: {\n    shipName() {\n      this.loadShip();\n    },\n    shipSprite() {\n      this.loadShip();\n    },\n    voiceVolume() {\n      this.audio.volume = this.voiceVolume;\n    },\n    loading(newData) {\n      if (!this.audio) {\n        return;\n      }\n      if (newData) {\n        // If true\n        this.audio.pause();\n      } else {\n        this.onAdd();\n      }\n    },\n    idleLineWait() {\n      this.resetIdleTimeout();\n    },\n    useIdleLines() {\n      this.resetIdleTimeout();\n    },\n    damagedMode() {\n      this.resizeCanvas();\n    }\n  },\n  async mounted() {\n    this.ctx = this.canvas.getContext(\"2d\");\n    window.addEventListener(\"resize\", this.windowResizeHandler);\n    window.addEventListener(\"hourly\", this.onHourly);\n    window.addEventListener(\"battleStart\", this.battleStart);\n    window.addEventListener(\"battleEnd\", this.battleEnd);\n    this.canvas.addEventListener(\"click\", this.clickOnShip);\n\n    this.audio.onended = this.audioHasEnded;\n    this.audio.volume = this.voiceVolume;\n\n    this.firstLoad = true;\n    await this.loadShip();\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.windowResizeHandler);\n    window.removeEventListener(\"hourly\", this.onHourly);\n    window.removeEventListener(\"battleStart\", this.battleStart);\n    window.removeEventListener(\"battleEnd\", this.battleEnd);\n    if (this.idleTimeout) {\n      window.clearTimeout(this.idleTimeout);\n    }\n    if (this.audio) {\n      this.audio.pause();\n      this.audio.src = \"\";\n      this.audio = null;\n    }\n  },\n  methods: {\n    clickOnShip(event) {\n      let canvasRect = this.canvas.getBoundingClientRect();\n      const mousePos = {\n        x: event.x - canvasRect.x,\n        y: event.y - canvasRect.y\n      };\n      try {\n        const pixel = this.canvas\n          .getContext(\"2d\")\n          .getImageData(mousePos.x, mousePos.y, 1, 1).data;\n        if (pixel[3] == 0) {\n          return;\n        }\n      } catch (e) {\n        window.logError(\"Unable to check click event. \", e);\n        return;\n      }\n\n      // If success, allow\n      this.onTap();\n    },\n    isDayTime() {\n      let currentHour = new Date().getHours();\n      return currentHour >= 7 && currentHour < 19;\n    },\n    windowResizeHandler() {\n      this.resizeCanvas();\n    },\n    animateExitRight(callback) {\n      this.isShipAnimationFinished = false;\n      this.shipXPositionModifier = 0;\n\n      let exitRight = () => {\n        let widthToUse = Math.min(\n          window.innerWidth,\n          this.canvasCalculatedWidth\n        );\n        let absoluteBarrier = widthToUse + this.shipWidth;\n        let absoluteBarrierRatio =\n          absoluteBarrier / widthToUse - this.shipExpectedPositionRatio;\n\n        // These are the conditions to end prematurely.\n        if (\n          this.isShipAnimationFinished ||\n          this.shipXPositionModifier >= absoluteBarrierRatio\n        ) {\n          this.isShipAnimationFinished = true; // In case it did not end by the boolean\n          if (callback && typeof callback === \"function\") {\n            callback();\n          }\n          return;\n        }\n\n        let shipMovementInRatio = this.shipMovementSpeed / widthToUse;\n        this.shipXPositionModifier += shipMovementInRatio;\n        reqAnimFrame(exitRight);\n\n        this.resizeCanvas();\n      };\n      exitRight();\n    },\n    animateEnterLeft(callback) {\n      let initialWidth = Math.min(\n        window.innerWidth,\n        this.canvasCalculatedWidth\n      );\n      let startPoint = 0 - this.shipWidth;\n      let startPointRatio =\n        startPoint / initialWidth - this.shipExpectedPositionRatio;\n\n      this.isShipAnimationFinished = false;\n      this.shipXPositionModifier = startPointRatio;\n\n      let enterLeft = () => {\n        // These are the conditions to end prematurely.\n        if (this.isShipAnimationFinished || this.shipXPositionModifier >= 0) {\n          this.isShipAnimationFinished = true; // In case it did not end by the boolean\n          if (callback && typeof callback === \"function\") {\n            callback();\n          }\n          return;\n        }\n\n        let widthToUse = Math.min(\n          window.innerWidth,\n          this.canvasCalculatedWidth\n        );\n        let shipMovementInRatio = this.shipMovementSpeed / widthToUse;\n        this.shipXPositionModifier += shipMovementInRatio;\n        reqAnimFrame(enterLeft);\n\n        this.resizeCanvas();\n      };\n      enterLeft();\n    },\n    battleStart() {\n      this.animateExitRight(() => {\n        // Turn on combat mode\n        this.shipExpectedPositionRatio = shipCombatExpectedPositionRatio;\n        this.$store.commit(\n          \"setCombatMode\",\n          new Date().getTime() + __combatModeLength\n        );\n\n        this.animateEnterLeft(() => {\n          // Once done, reset the position modifier\n          this.shipXPositionModifier = 0;\n          this.resizeCanvas();\n        });\n      });\n\n      // Play audio\n      this.selectAndPlayEvent(\"onBattleStart\", this.shipBattleStartEventNames);\n    },\n    battleEnd() {\n      log(\"Ending Combat Phase\");\n      this.$store.commit(\"setCombatMode\", null);\n      this.shipXPositionModifier = 0;\n      this.isShipAnimationFinished = true;\n      this.shipExpectedPositionRatio = shipDefaultExpectedPositionRatio;\n      this.resizeCanvas();\n\n      this.selectAndPlayEvent(\n        \"onBattleComplete\",\n        this.shipBattleCompleteEventNames\n      );\n    },\n    resetIdleTimeout() {\n      if (this.idleTimeout) {\n        window.clearTimeout(this.idleTimeout);\n      }\n\n      if (!this.useIdleLines) {\n        return;\n      }\n\n      let now = new Date();\n      log(\n        `resetIdleTimeout wait ${\n          this.idleLineWait\n        } min from [${now.getHours()}:${now.getMinutes()}:${now.getSeconds()}]`\n      );\n\n      this.idleTimeout = window.setTimeout(\n        this.onIdle,\n        this.idleLineWait * 60 * 1000\n      );\n    },\n    audioHasEnded() {\n      this.$store.commit(\"setTitle\", null);\n      this.$store.commit(\"setSubtitle\", null);\n      this.currentEvent = null;\n    },\n    playCurrentEvent() {\n      if (this.audio) {\n        this.audio.pause();\n      }\n      if (this.loading) return;\n      if (this.currentEvent == null) return;\n\n      window.log(\n        `Playing voice [${this.currentEvent.Model}/${this.currentEvent.Event}].`,\n        this.currentEvent\n      );\n\n      try {\n        let currentVoice = path.join(this.voicesDir, this.currentEvent.Voice);\n        this.audio.src = currentVoice;\n        this.audio.load();\n\n        let promise = this.audio.play();\n        promise\n          .then(() => {\n            this.resetIdleTimeout();\n            this.$store.commit(\"setSubtitle\", this.currentEvent.English);\n            if (\n              this.currentEvent.Command == \"Special\" ||\n              this.currentEvent.Command == \"Wedding\"\n            ) {\n              this.$store.commit(\"setTitle\", this.currentEvent.Event);\n            } else {\n              this.$store.commit(\"setTitle\", null);\n            }\n          })\n          .catch(e => {\n            throw e;\n          });\n      } catch (e) {\n        logError(\"[Ship][playCurrentEvent] Error.\", e);\n      }\n    },\n    selectAndPlayEvent(eventType, eventNames) {\n      if (!eventNames || eventNames.length == 0) {\n        return;\n      }\n      try {\n        let list = this.getEventDataFromEventNames(eventNames);\n        if (!list || list.length == 0) return;\n        this.currentEvent = list[Math.floor(Math.random() * list.length)];\n        this.playCurrentEvent();\n      } catch (e) {\n        window.logError(`[Ship] Error for '${eventType}'.`, e);\n      }\n    },\n    getEventDataFromEventNames(eventList) {\n      if (\n        !this.shipDB ||\n        !eventList ||\n        eventList.length == 0 ||\n        !this.shipSpriteModels\n      )\n        return [];\n      let models = this.shipSpriteModels;\n      let eventDataList = [];\n      try {\n        eventList.map(eventName => {\n          let array = this.shipDB.Events[eventName];\n          if (array.length == 1) {\n            eventDataList.push(array[0]);\n          } else {\n            array.map(event => {\n              if (this.useAllModelLines || models.includes(event.Model)) {\n                eventDataList.push(event);\n              }\n            });\n          }\n        });\n      } catch (e) {\n        window.logError(\n          \"[Ship] Unexpected error in getVoiceFilesFromEventList.\",\n          eventList,\n          e\n        );\n      }\n      return eventDataList;\n    },\n    onIdle() {\n      if (this.idleTimeout) {\n        window.clearTimeout(this.idleTimeout);\n      }\n\n      if (!this.useIdleLines) {\n        return;\n      }\n\n      if (this.audio) {\n        if (!this.audio.paused && !this.audio.ended) {\n          // Wait for the audio to finish playing\n\n          this.idleTimeout = window.setTimeout(() => {\n            // Wait another 3 seconds as padding.\n            this.onIdle();\n          }, 3000);\n          return;\n        }\n      }\n\n      this.selectAndPlayEvent(\"onIdle\", this.shipIdleEventNames);\n    },\n    onAdd() {\n      this.selectAndPlayEvent(\"onAdd\", this.shipSetSecretaryEventNames);\n    },\n    onTap() {\n      this.selectAndPlayEvent(\"onTap\", this.shipTapEventNames);\n    },\n    onHourly(hourlyEvent) {\n      if (this.audio) {\n        if (!this.audio.paused && !this.audio.ended) {\n          // Wait for the audio to finish playing\n          let rewrappedEvent = JSON.parse(JSON.stringify(hourlyEvent));\n          window.setTimeout(() => {\n            log(\"Rewrapped event.\", hourlyEvent);\n            // Wait another 3 seconds as padding.\n            this.onHourly(rewrappedEvent);\n          }, 3000);\n          return;\n        }\n      }\n\n      try {\n        log(\"Playing hourly event.\", hourlyEvent);\n        let list = this.getEventDataFromEventNames(this.shipHourlyEventNames);\n        if (!list || list.length == 0) return;\n        list.map(event => {\n          if (event.Event == hourlyEvent.detail) {\n            this.currentEvent = event;\n          }\n        });\n        this.playCurrentEvent();\n      } catch (e) {\n        window.logError(\"[Ship] Error in 'onHourly'.\", e);\n      }\n    },\n    async getDatabase() {\n      this.shipDB = await this.$store.dispatch(\"getDatabase\", this.shipName);\n    },\n    clearCanvas() {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    },\n    onLoad(loadedItem) {\n      this.loadCounter++;\n      console.log(\"[Ship] Loaded\", loadedItem);\n      if (this.loadCounter >= this.loadLimit) {\n        this.firstLoad = false;\n        window.dispatchEvent(new CustomEvent(\"shipLoaded\"));\n      }\n    },\n    async loadImage(imagePath, firstLoad = false) {\n      if (!imagePath) return;\n      return await this.$store.dispatch('loadImage', {\n          imagePath,\n          postLoad: () => {\n            if (firstLoad) this.onLoad(imagePath);\n          },\n      });\n    },\n    async loadShip() {\n      try {\n        await this.getDatabase();\n        this.defaultSprite = await this.loadImage(this.shipNormalImagePath, this.firstLoad);\n        this.damagedSprite = await this.loadImage(this.shipDamagedImagePath, this.firstLoad);\n\n        if (this.combatMode) {\n          log(\"[Ship] Entering combat mode\");\n          this.shipExpectedPositionRatio = shipCombatExpectedPositionRatio;\n        } else {\n          this.shipExpectedPositionRatio = shipDefaultExpectedPositionRatio;\n        }\n\n        this.resizeCanvas(); // Also calls draw ship\n\n        // Play SetSecretary event\n        this.onAdd();\n      } catch (e) {\n        window.logError(\"[Ship] Error in getDatabase or loadShip\", e);\n      }\n    },\n    // To get the correct ratio\n    calculateWidthFromHeight(naturalWidth, naturalHeight, currentHeight) {\n      return (currentHeight * naturalWidth) / (naturalHeight * 1.0);\n    },\n    drawShip() {\n      let height = this.shipHeight;\n      let width = this.shipWidth;\n\n      if (!height || !width) return;\n\n      // Some maths needed to decide Y position of ship\n      let shipCenterY = height / 2.0;\n      let canvasCenterY = this.canvas.height / 2.0;\n      let yOffset =\n        this.shipYPositionOffset + (shipCenterY - canvasCenterY) / 2.0;\n\n      // Some maths need to be done to decide on the X position of the shipgirl\n      let canvasCenterX = this.canvas.width / 2.0;\n      let shipCenterX = width / 2.0; // Used to set the ship in the center of the expected point\n      let widthToUse = Math.min(this.canvas.width, window.innerWidth);\n      let shipExpectedPosition = 0;\n      let shipActualPosition = 0;\n\n      if (this.shipExpectedPositionRatio >= 0.5) {\n        shipExpectedPosition = widthToUse * this.shipExpectedPositionRatio;\n        shipActualPosition = Math.max(canvasCenterX, shipExpectedPosition);\n      } else {\n        // Reverse psychology (by pretending we're calculating from the right instead of the left)\n        shipExpectedPosition =\n          this.canvas.width - widthToUse * (1 - this.shipExpectedPositionRatio);\n        shipActualPosition = Math.min(canvasCenterX, shipExpectedPosition);\n      }\n\n      let xOffset = this.shipXPositionOffset + shipActualPosition - shipCenterX;\n\n      let spriteToDraw = this.damagedMode\n        ? this.damagedSprite\n        : this.defaultSprite;\n      log(\"Sprite to draw\", spriteToDraw);\n      this.ctx.drawImage(spriteToDraw, xOffset, yOffset, width, height);\n    },\n    resizeCanvas() {\n      //window.log(`Ship Resize: ${this.canvas.width}, ${this.canvas.height}`);\n      try {\n        this.clearCanvas();\n        this.windowHeight = window.innerHeight;\n        this.canvasCalculatedWidth = this.calculateWidthFromHeight(\n          __room.naturalWidth,\n          __room.naturalHeight,\n          window.innerHeight\n        );\n        this.canvas.height = window.innerHeight;\n        this.canvas.width = this.canvasCalculatedWidth;\n\n        this.drawShip();\n      } catch (e) {\n        window.logError(\"[Ship] Error in resize. \", e);\n      }\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ship.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ship.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ship.vue?vue&type=template&id=4603c956&scoped=true&\"\nimport script from \"./Ship.vue?vue&type=script&lang=js&\"\nexport * from \"./Ship.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ship.vue?vue&type=style&index=0&id=4603c956&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4603c956\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui-layer\",style:({ width: (_vm.uiWidth + \"px\") })},[(_vm.menuOpen)?_c('div',{staticClass:\"menu-closer\"},[(_vm.menuOpen == 'settings')?_c('div',{staticClass:\"menu center limit-size\"},[_c('div',{staticClass:\"settings\"},[_c('h3',[_vm._v(\"Volume\")]),_c('div',[_c('div',{staticClass:\"slider-setting\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Overall\")]),_c('div',{staticClass:\"slider-holder center-div\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.overallSlider),expression:\"overallSlider\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"100\"},domProps:{\"value\":(_vm.overallSlider)},on:{\"__r\":function($event){_vm.overallSlider=$event.target.value}}})]),_c('div',{staticClass:\"volume-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleMuteOverall.apply(null, arguments)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.overallVolumeMute),expression:\"!overallVolumeMute\"}],attrs:{\"src\":\"img/volume.png\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.overallVolumeMute),expression:\"overallVolumeMute\"}],attrs:{\"src\":\"img/volume_mute.png\"}})]),_c('div',{staticClass:\"label right\"},[_vm._v(_vm._s(Math.floor(_vm.overallVolume * 100))+\"%\")])]),_c('div',{staticClass:\"slider-setting\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"BGM\")]),_c('div',{staticClass:\"slider-holder center-div\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bgmSlider),expression:\"bgmSlider\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"100\"},domProps:{\"value\":(_vm.bgmSlider)},on:{\"__r\":function($event){_vm.bgmSlider=$event.target.value}}})]),_c('div',{staticClass:\"volume-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleMuteBgm.apply(null, arguments)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.bgmVolumeMute),expression:\"!bgmVolumeMute\"}],attrs:{\"src\":\"img/volume.png\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bgmVolumeMute),expression:\"bgmVolumeMute\"}],attrs:{\"src\":\"img/volume_mute.png\"}})]),_c('div',{staticClass:\"label right\"},[_vm._v(_vm._s(Math.floor(_vm.bgmVolume * 100))+\"%\")])]),_c('div',{staticClass:\"slider-setting\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"SE\")]),_c('div',{staticClass:\"slider-holder center-div\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.seSlider),expression:\"seSlider\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"100\"},domProps:{\"value\":(_vm.seSlider)},on:{\"__r\":function($event){_vm.seSlider=$event.target.value}}})]),_c('div',{staticClass:\"volume-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleMuteSe.apply(null, arguments)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.seVolumeMute),expression:\"!seVolumeMute\"}],attrs:{\"src\":\"img/volume.png\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.seVolumeMute),expression:\"seVolumeMute\"}],attrs:{\"src\":\"img/volume_mute.png\"}})]),_c('div',{staticClass:\"label right\"},[_vm._v(_vm._s(Math.floor(_vm.seVolume * 100))+\"%\")])]),_c('div',{staticClass:\"slider-setting\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Voice\")]),_c('div',{staticClass:\"slider-holder center-div\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.voiceSlider),expression:\"voiceSlider\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"100\"},domProps:{\"value\":(_vm.voiceSlider)},on:{\"__r\":function($event){_vm.voiceSlider=$event.target.value}}})]),_c('div',{staticClass:\"volume-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleMuteVoice.apply(null, arguments)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.voiceVolumeMute),expression:\"!voiceVolumeMute\"}],attrs:{\"src\":\"img/volume.png\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.voiceVolumeMute),expression:\"voiceVolumeMute\"}],attrs:{\"src\":\"img/volume_mute.png\"}})]),_c('div',{staticClass:\"label right\"},[_vm._v(_vm._s(Math.floor(_vm.voiceVolume * 100))+\"%\")])])]),_c('h3',[_vm._v(\"Ship\")]),_c('div',[_c('div',{staticClass:\"ship-setting\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Enable any line from all models to be used regardless of current ship model.\")]),_c('div',[_c('div',{staticClass:\"checkbox\",class:{ unchecked: !_vm.useAllModelLines },on:{\"click\":_vm.toggleAllModelLines}},[_c('span',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"ship-setting\",class:{ disabled: _vm.useSpecialLinesOnly }},[_c('div',{staticClass:\"label\"},[_vm._v(\"Enable miscellaneous lines (like equipment and resupply) as bonus lines.\")]),_c('div',[_c('div',{staticClass:\"checkbox\",class:{ unchecked: !_vm.useBonusLines },on:{\"click\":_vm.toggleBonusLines}},[_c('span',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"ship-setting\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Enable ship's special occasion lines.\")]),_c('div',[_c('div',{staticClass:\"checkbox\",class:{ unchecked: !_vm.useSpecialLines },on:{\"click\":_vm.toggleSpecialLines}},[_c('span',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"ship-setting\",class:{ disabled: !_vm.useSpecialLines }},[_c('div',{staticClass:\"sub-label\"},[_vm._v(\" Only use special occasion lines.\")]),_c('div',[_c('div',{staticClass:\"checkbox\",class:{ unchecked: !_vm.useSpecialLinesOnly },on:{\"click\":_vm.toggleUseSpecialLinesOnly}},[_c('span',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"ship-setting\",class:{ disabled: _vm.useSpecialLinesOnly }},[_c('div',{staticClass:\"label\"},[_vm._v(\"Enable Idle lines.\")]),_c('div',[_c('div',{staticClass:\"checkbox\",class:{ unchecked: !_vm.useIdleLines },on:{\"click\":_vm.toggleIdleLines}},[_c('span',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"slider-setting\",class:{ disabled: _vm.useSpecialLinesOnly || !_vm.useIdleLines }},[_c('div',{staticClass:\"label\"},[_vm._v(\"Idle\")]),_c('div',{staticClass:\"slider-holder center-div\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.idleLineWaitSlider),expression:\"idleLineWaitSlider\"}],staticClass:\"slider\",class:{ disabled: _vm.useSpecialLinesOnly || !_vm.useIdleLines },attrs:{\"type\":\"range\",\"min\":\"1\",\"max\":\"12\"},domProps:{\"value\":(_vm.idleLineWaitSlider)},on:{\"__r\":function($event){_vm.idleLineWaitSlider=$event.target.value}}})]),_c('div',{staticClass:\"label right\",staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(Math.floor(_vm.idleLineWait))+\" min\")])])]),_c('h3',[_vm._v(\"Misc\")]),_c('div',{staticClass:\"d-flex\",staticStyle:{\"padding-bottom\":\"20px\"}},[_c('button',{staticClass:\"standard-button info\",on:{\"click\":_vm.openBgm}},[_vm._v(\"Change BGM\")]),_c('button',{staticClass:\"standard-button\",class:{ 'info': _vm.hideButtons, 'danger': !_vm.hideButtons },staticStyle:{\"margin-left\":\"5px\"},on:{\"click\":function($event){return _vm.toggleHideButtons()}}},[_c('div',{staticStyle:{\"width\":\"60px\"}},[_vm._v(_vm._s(_vm.hideButtons ? \"Show\" : \"Hide\")+\" UI\")])])])])]):_vm._e(),(_vm.menuOpen == 'composition')?_c('div',{staticClass:\"menu center-div composition\"},[_c('ShipAssigner',{on:{\"shipChanged\":function($event){return _vm.shipChanged()},\"closeMenu\":function($event){return _vm.closeMenu()},\"buttonPress\":function($event){return _vm.genericButtonPress()}}})],1):_vm._e(),(_vm.menuOpen == 'bgm')?_c('div',{staticClass:\"menu center-div\"},[_c('BGM',{on:{\"buttonPress\":function($event){return _vm.genericButtonPress()}}})],1):_vm._e(),_c('div',{staticClass:\"back-button-holder center-div\"},[(_vm.menuOpen == 'bgm')?_c('button',{staticClass:\"standard-button info\",on:{\"click\":_vm.openSettings}},[_vm._v(\"Back\")]):(Boolean(_vm.menuOpen))?_c('button',{staticClass:\"standard-button info\",on:{\"click\":function($event){return _vm.closeMenu()}}},[_vm._v(\"Close\")]):_vm._e()])]):_vm._e(),_c('div',{staticClass:\"button-wrapper\",class:{ 'min-mode': _vm.belowMin }},[_c('div',{staticClass:\"buttons-left\"},[_c('div',{staticClass:\"sortie-button\",class:{ 'set-transparent': _vm.hideButtons, disabled: _vm.disableSortieButton, clickable: !_vm.disableSortieButton, 'min-mode': _vm.belowMin },on:{\"mouseover\":function($event){return _vm.setButtonHoverState('sortieButtonHover', true)},\"mouseleave\":function($event){return _vm.setButtonHoverState('sortieButtonHover', false)},\"click\":_vm.sortieShip}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sortieButtonHover),expression:\"!sortieButtonHover\"}],attrs:{\"src\":\"img/sortie_button.png\",\"width\":_vm.sortieButtonWidth}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sortieButtonHover),expression:\"sortieButtonHover\"}],staticClass:\"fixed\",staticStyle:{\"pointer-events\":\"none\"}},[_c('img',{attrs:{\"src\":\"img/sortie_button_highlighted_part1.png\",\"width\":_vm.sortieButtonWidth}}),_c('img',{staticClass:\"absolute highlight-button\",staticStyle:{\"top\":\"0\",\"left\":\"0\"},attrs:{\"src\":\"img/sortie_button_highlighted_part2.png\",\"width\":_vm.sortieButtonWidth}}),_c('img',{staticClass:\"absolute\",staticStyle:{\"top\":\"0\",\"left\":\"0\"},attrs:{\"src\":\"img/sortie_button_highlighted_part3.png\",\"width\":_vm.sortieButtonWidth}})])]),(!_vm.combatMode)?_c('div',{staticClass:\"composition-button\",class:{ 'set-transparent': _vm.hideButtons, disabled: _vm.disableCompositionButton, clickable: !_vm.disableCompositionButton, 'min-mode': _vm.belowMin },style:({ bottom: _vm.belowMin ? '0px' : ((13 + Math.max(_vm.compositionButtonHeight * 1.5, _vm.compositionButtonMinHeight)) + \"px\") }),on:{\"mouseover\":function($event){return _vm.setButtonHoverState('compositionButtonHover', true)},\"mouseleave\":function($event){return _vm.setButtonHoverState('compositionButtonHover', false)},\"click\":_vm.changeShip}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.compositionButtonHover),expression:\"!compositionButtonHover\"}],attrs:{\"src\":\"img/composition_button.png\",\"width\":_vm.compositionButtonWidth}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.compositionButtonHover),expression:\"compositionButtonHover\"}],staticClass:\"fixed\",staticStyle:{\"pointer-events\":\"none\"}},[_c('img',{staticClass:\"highlight-button\",attrs:{\"src\":\"img/highlight_button.png\",\"width\":_vm.compositionButtonWidth}}),_c('img',{staticClass:\"absolute\",staticStyle:{\"top\":\"0\",\"left\":\"0\"},attrs:{\"src\":\"img/composition_button_highlight.png\",\"width\":_vm.compositionButtonWidth}})])]):_vm._e(),(!_vm.combatMode)?_c('div',{staticClass:\"repair-button\",class:{ 'set-transparent': _vm.hideButtons, disabled: _vm.disableRepairButton, clickable: !_vm.disableRepairButton, 'min-mode': _vm.belowMin },style:({ left: _vm.belowMin ? '0px' : ((16 + Math.max(_vm.compositionButtonWidth * 1.5, _vm.compositionButtonMinWidth)) + \"px\") }),on:{\"mouseover\":function($event){return _vm.setButtonHoverState('repairButtonHover', true)},\"mouseleave\":function($event){return _vm.setButtonHoverState('repairButtonHover', false)},\"click\":_vm.repairShip}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.repairButtonHover),expression:\"!repairButtonHover\"}],attrs:{\"src\":\"img/docking_button.png\",\"width\":_vm.repairButtonWidth}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.repairButtonHover),expression:\"repairButtonHover\"}],staticClass:\"fixed\",staticStyle:{\"pointer-events\":\"none\"}},[_c('img',{staticClass:\"highlight-button\",attrs:{\"src\":\"img/highlight_button.png\",\"width\":_vm.compositionButtonWidth}}),_c('img',{staticClass:\"absolute\",staticStyle:{\"top\":\"0\",\"left\":\"0\"},attrs:{\"src\":\"img/docking_button_highlight.png\",\"width\":_vm.compositionButtonWidth}})])]):_vm._e()]),_c('div',{staticClass:\"buttons-center\"}),_c('div',{staticClass:\"buttons-right\"},[_c('div',{staticClass:\"settings-button clickable center-div\",class:{ 'set-transparent': _vm.hideButtons, 'min-mode': _vm.belowMin },on:{\"mouseover\":function($event){_vm.settingsButtonHover = true},\"mouseleave\":function($event){_vm.settingsButtonHover = false},\"click\":_vm.openSettings}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.settingsButtonHover),expression:\"!settingsButtonHover\"}],attrs:{\"src\":\"img/settings.png\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.settingsButtonHover),expression:\"settingsButtonHover\"}],attrs:{\"src\":\"img/settings_highlighted.png\"}})])])]),_c('div',{staticClass:\"subtitles-container center-div\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(Boolean(_vm.subtitle)),expression:\"Boolean(subtitle)\"}],staticClass:\"subtitles\",style:({ 'max-width': _vm.subtitleMaxWidth })},[_vm._v(_vm._s(_vm.subtitle))])]),_c('div',{staticClass:\"title-container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(Boolean(_vm.title)),expression:\"Boolean(title)\"}],staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bgm\"},_vm._l((_vm.bgmCategoryOrder),function(bgmCategoryName,categoryIndex){return _c('div',{key:categoryIndex},[_c('h3',[_vm._v(_vm._s(bgmCategoryName))]),_c('div',{staticClass:\"list-holder\"},_vm._l((_vm.bgmCategories[bgmCategoryName]),function(source,index){return _c('div',{key:index,staticClass:\"list-item\",class:{ 'selected': _vm.selectedBgm && _vm.selectedBgm.Source == source },on:{\"click\":function($event){return _vm.changeSelectedBgm(_vm.BGMs[source])}}},[_c('div',{staticClass:\"left\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.windowWidth < _vm.mobileWidth),expression:\"windowWidth < mobileWidth\"}]},[_vm._v(\"\")]),_c('span',[_vm._v(_vm._s(_vm.BGMs[source].English))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.windowWidth > _vm.mobileWidth),expression:\"windowWidth > mobileWidth\"}],staticClass:\"right\"},[_vm._v(_vm._s(_vm.BGMs[source].Japanese))])])}),0)])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bgm\">\n    <div v-for=\"(bgmCategoryName, categoryIndex) in bgmCategoryOrder\" :key=\"categoryIndex\">\n      <h3>{{ bgmCategoryName }}</h3>\n      <div class=\"list-holder\">\n        <div\n          v-for=\"(source, index) in bgmCategories[bgmCategoryName]\"\n          :key=\"index\"\n          class=\"list-item\"\n          :class=\"{ 'selected': selectedBgm && selectedBgm.Source == source }\"\n          @click=\"changeSelectedBgm(BGMs[source])\"\n        >\n          <div class=\"left\">\n            <span v-show=\"windowWidth < mobileWidth\">&nbsp;&nbsp;</span>\n            <span>{{ BGMs[source].English }}</span>\n          </div>\n          <div v-show=\"windowWidth > mobileWidth\" class=\"right\">{{ BGMs[source].Japanese }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"BGM\",\n  data() {\n    return {\n      windowWidth: 0\n    };\n  },\n  computed: {\n    ...mapGetters({\n      BGMs: \"BGMs\",\n      bgmCategories: \"bgmCategories\",\n      bgmCategoryOrder: \"bgmCategoryOrder\",\n      selectedBgm: \"selectedBgm\"\n    }),\n    mobileWidth() {\n      return __mobileMode.width;\n    }\n  },\n  async mounted() {\n    this.recalculateWidth();\n    window.addEventListener(\"resize\", this.recalculateWidth);\n\n    try {\n      var elem = document.getElementsByClassName(\"list-item selected\");\n      elem[0].scrollIntoView();\n    } catch (e) {\n      logError(\"[BGM] Unable to scroll to selected bgm element.\", e);\n    }\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.recalculateWidth);\n  },\n  methods: {\n    // To get the correct ratio\n    calculateWidthFromHeight(height) {\n      return (height * __room.naturalWidth) / (__room.naturalHeight * 1.0);\n    },\n    recalculateWidth() {\n      this.windowWidth = Math.min(\n        window.innerWidth,\n        this.calculateWidthFromHeight(window.innerHeight)\n      );\n    },\n    changeSelectedBgm(bgm) {\n      this.$emit(\"buttonPress\");\n      this.$store.commit(\"setSelectedBgm\", bgm);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.bgm {\n  width: 100%;\n  height: 100%;\n  padding: 0px 20px;\n\n  .list-holder {\n    margin-left: 10px;\n\n    .list-item {\n      padding: 2px 5px;\n      display: flex;\n      align-items: center;\n\n      &:hover {\n        background-color: rgba(200, 200, 0, 0.8);\n      }\n\n      &.selected {\n        background-color: rgba(0, 0, 255, 0.8);\n      }\n\n      .left {\n        flex: 1;\n        margin-right: 5px;\n      }\n\n      .right {\n        flex: 1;\n        margin-left: 5px;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BGM.vue?vue&type=template&id=7c00ac38&scoped=true&\"\nimport script from \"./BGM.vue?vue&type=script&lang=js&\"\nexport * from \"./BGM.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BGM.vue?vue&type=style&index=0&id=7c00ac38&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c00ac38\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ship-assigner\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"left\"},[_c('button',{staticClass:\"standard-button info\",on:{\"click\":_vm.prevship}},[_vm._v(\"Prev\")])]),_c('div',{staticClass:\"center-div fixed\"},[_c('img',{staticClass:\"banner\",attrs:{\"src\":_vm.getSprite(_vm.currentShipDefaultBanner)}}),_c('div',{staticClass:\"header-text absolute center-div\"})]),_c('div',{staticClass:\"right\"},[_c('button',{staticClass:\"standard-button info\",on:{\"click\":_vm.nextship}},[_vm._v(\"Next\")])])]),_c('div',{staticClass:\"overflow-container\"},[_c('div',{ref:\"shipAssignerMainContent\",staticClass:\"main-content\"},_vm._l((_vm.splitArray),function(row,rowIndex){return _c('div',{key:rowIndex},[_c('div',{staticClass:\"d-flex card-row\",class:{ last: rowIndex == _vm.splitArray.length - 1 }},_vm._l((row),function(shipSpriteName,index){return _c('div',{key:(rowIndex + \"-\" + index),staticClass:\"card-holder\",class:{ ml: index != 0 }},[(Boolean(_vm.currentShipSprites[shipSpriteName]))?_c('div',{staticClass:\"center-div\"},[_c('div',{staticClass:\"card\",class:{ selected: shipSpriteName == _vm.selectedSpriteName },on:{\"click\":function($event){return _vm.changeShipAndSprite(shipSpriteName)}}},[_c('img',{attrs:{\"src\":_vm.getSprite(_vm.currentShipSprites[shipSpriteName].Card),\"width\":_vm.shipCardWidth},on:{\"load\":_vm.scrollToSelectedElement}})])]):_vm._e()])}),0)])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ship-assigner\">\n    <!-- \n      Header\n    -->\n    <div class=\"header\">\n      <div class=\"left\">\n        <button class=\"standard-button info\" @click=\"prevship\">Prev</button>\n      </div>\n      <div class=\"center-div fixed\">\n        <!--v-if=\"windowWidth > mobileWidth\"-->\n        <img :src=\"getSprite(currentShipDefaultBanner)\" class=\"banner\" />\n        <div class=\"header-text absolute center-div\">\n          <!--<h3>{{ currentShip }}</h3>-->\n        </div>\n      </div>\n      <div class=\"right\">\n        <button class=\"standard-button info\" @click=\"nextship\">Next</button>\n      </div>\n    </div>\n\n    <!-- \n      Main content\n    -->\n\n    <div class=\"overflow-container\">\n      <div ref=\"shipAssignerMainContent\" class=\"main-content\">\n        <div v-for=\"(row, rowIndex) in splitArray\" :key=\"rowIndex\">\n          <div class=\"d-flex card-row\" :class=\"{ last: rowIndex == splitArray.length - 1 }\">\n            <div\n              v-for=\"(shipSpriteName, index) in row\"\n              :key=\"`${rowIndex}-${index}`\"\n              class=\"card-holder\"\n              :class=\"{ ml: index != 0 }\"\n            >\n              <div v-if=\"Boolean(currentShipSprites[shipSpriteName])\" class=\"center-div\">\n                <div\n                  class=\"card\"\n                  :class=\"{ selected: shipSpriteName == selectedSpriteName }\"\n                  @click=\"changeShipAndSprite(shipSpriteName)\"\n                >\n                  <img\n                    :src=\"getSprite(currentShipSprites[shipSpriteName].Card)\"\n                    :width=\"shipCardWidth\"\n                    @load=\"scrollToSelectedElement\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport path from \"path\";\n\nexport default {\n  name: \"ShipAssigner\",\n  data() {\n    return {\n      windowWidth: 0,\n      numberOfShipsInRow: 1,\n      currentShip: null,\n      splitArray: []\n    };\n  },\n  computed: {\n    ...mapGetters({\n      database: \"database\",\n      shipNames: \"shipNames\",\n      selectedShipName: \"selectedShipName\",\n      selectedSpriteName: \"selectedSpriteName\"\n    }),\n    mainContent() {\n      return this.$refs.shipAssignerMainContent;\n    },\n    shipSprites() {\n      if (!this.shipNames || !this.database) return [];\n      return this.shipNames.map(shipName => this.database[shipName].Sprites); //.reduce((t, s) => t.concat(s))\n    },\n    mobileWidth() {\n      return window.__mobileMode.width;\n    },\n    shipCardWidth() {\n      return this.mobileWidth > this.windowWidth ? 200 : this.windowWidth / 4.5;\n    },\n\n    currentShipDB() {\n      if (\n        !this.database ||\n        !this.currentShip ||\n        !this.database[this.currentShip]\n      ) {\n        return null;\n      }\n      return this.database[this.currentShip];\n    },\n    shipFileName() {\n      if (!this.currentShip || !this.currentShipDB) return null;\n      return this.currentShipDB.FileName;\n    },\n    shipDir() {\n      if (!this.shipFileName) return null;\n      return path.join(__ship, this.shipFileName);\n    },\n    spritesDir() {\n      if (!this.shipDir) return null;\n      return path.join(this.shipDir, \"sprites\");\n    },\n    currentShipNameIndex() {\n      if (!this.currentShip) return 0;\n      return this.shipNames.indexOf(this.currentShip);\n    },\n    currentShipSprites() {\n      if (!this.currentShipDB) {\n        return null;\n      }\n      return this.currentShipDB.Sprites;\n    },\n    currentShipSpritesKeys() {\n      if (!this.currentShipSprites || this.currentShipSprites.length == 0) {\n        return [];\n      }\n      return Object.keys(this.currentShipSprites).filter(s =>\n        Boolean(this.currentShipSprites[s].Card)\n      );\n    },\n    currentShipDefaultSprites() {\n      if (!this.currentShipSprites) {\n        return null;\n      }\n      return this.currentShipSprites[this.currentShip];\n    },\n    currentShipDefaultBanner() {\n      if (!this.currentShipDB) {\n        return null;\n      }\n      let defaultBanner = this.currentShipDB.DefaultBanner;\n      log(\"DefaultBanner\", defaultBanner);\n      if (!defaultBanner) {\n        return null;\n      }\n\n      log(\"DefaultBannerSprites\", this.currentShipDB.Sprites[defaultBanner]);\n      return this.currentShipDB.Sprites[defaultBanner].Banner;\n    }\n  },\n  created() {\n    this.changeCurrentShip(this.selectedShipName);\n    this.recalculateWidth();\n\n    log(\"ShipDB\", this.currentShipDB);\n    log(\"ShipFileName\", this.currentShipDB.FileName);\n    window.addEventListener(\"resize\", this.recalculateWidth);\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.recalculateWidth);\n  },\n  methods: {\n    // To get the correct ratio\n    calculateWidthFromHeight(height) {\n      return (height * __room.naturalWidth) / (__room.naturalHeight * 1.0);\n    },\n    recalculateWidth() {\n      this.windowWidth = Math.min(\n        window.innerWidth,\n        this.calculateWidthFromHeight(window.innerHeight)\n      );\n      this.numberOfShipsInRow = this.windowWidth < this.mobileWidth ? 1 : 3;\n      this.generateSplitArray(this.currentShipSpritesKeys);\n    },\n    scrollToSelectedElement() {\n      try {\n        var elem = document.getElementsByClassName(\"card selected\");\n        if (!elem || elem.length == 0) {\n          return;\n        }\n        elem[0].scrollIntoView();\n      } catch (e) {\n        logError(\n          \"[ShipAssigner] Unable to scroll to selected ship sprite's element.\",\n          e\n        );\n      }\n    },\n    changeShipAndSprite(sprite) {\n      this.$store.commit(\"setSelectedShipName\", this.currentShip);\n      this.$store.commit(\"setSelectedSpriteName\", sprite);\n      this.$emit(\"shipChanged\");\n    },\n    getSprite(filename) {\n      if (!filename || !this.spritesDir) {\n        return null;\n      }\n      return path.join(this.spritesDir, filename);\n    },\n    changeCurrentShip(ship) {\n      this.currentShip = ship;\n      this.generateSplitArray(this.currentShipSpritesKeys);\n    },\n    scrollMainContentToTop() {\n      try {\n        this.mainContent.scrollTop = 0;\n      } catch (e) {\n        logError(\"[ShipAssigner] Unable to scroll main content. \", e);\n      }\n    },\n    prevship() {\n      if (!this.shipNames || this.shipNames.length <= 1) {\n        return;\n      }\n      this.$emit(\"buttonPress\");\n      let index = this.currentShipNameIndex;\n      if (index == 0) {\n        this.changeCurrentShip(this.shipNames[this.shipNames.length - 1]);\n      } else {\n        this.changeCurrentShip(this.shipNames[index - 1]);\n      }\n      this.scrollMainContentToTop();\n    },\n    nextship() {\n      if (!this.shipNames || this.shipNames.length <= 1) {\n        return;\n      }\n      this.$emit(\"buttonPress\");\n      let index = this.currentShipNameIndex;\n      if (index == this.shipNames.length - 1) {\n        this.changeCurrentShip(this.shipNames[0]);\n      } else {\n        this.changeCurrentShip(this.shipNames[index + 1]);\n      }\n      this.scrollMainContentToTop();\n    },\n    generateSplitArray(spritesArray) {\n      if (\n        !this.shipSprites ||\n        !this.currentShip ||\n        !spritesArray ||\n        spritesArray.length == 0\n      ) {\n        return;\n      }\n      //let priorityList = [\"Base\", \"Kai\", \"Kai Ni\"];\n      let spriteDB = this.shipSprites[this.currentShipNameIndex];\n\n      if (!spriteDB) {\n        return;\n      }\n\n      try {\n        let generatedArray = [];\n        let spriteList = JSON.parse(JSON.stringify(spritesArray)).sort(\n          (a, b) => spriteDB[a].Index - spriteDB[b].Index\n        );\n\n        for (\n          let i = 0;\n          i < spriteList.length;\n          i = i + this.numberOfShipsInRow\n        ) {\n          let array = [];\n          for (let j = 0; j < this.numberOfShipsInRow; j++) {\n            array.push(spriteList[i + j]);\n          }\n          generatedArray.push(array);\n        }\n\n        this.splitArray = generatedArray;\n      } catch (e) {\n        logError(\"[ShipAssigner] generateSplitArray error.\", e);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@text-shadow-pos-width: 1px;\n@text-shadow-neg-width: 1px;\n@text-shadow-color: #000000;\n\n.ship-assigner {\n  width: 100%;\n  height: 100%;\n  padding: 0px 0px 0px 0px;\n\n  .header {\n    display: flex;\n    margin-top: 10px;\n    margin-bottom: 10px;\n\n    .header-text {\n      text-shadow: @text-shadow-pos-width @text-shadow-pos-width\n          @text-shadow-color,\n        @text-shadow-neg-width @text-shadow-neg-width @text-shadow-color,\n        @text-shadow-neg-width @text-shadow-pos-width @text-shadow-color,\n        @text-shadow-pos-width @text-shadow-neg-width @text-shadow-color;\n    }\n\n    .left {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-right: 10px;\n      flex: 1;\n    }\n\n    .right {\n      display: flex;\n      justify-content: flex-start;\n      align-items: center;\n      margin-left: 10px;\n      flex: 1;\n    }\n  }\n\n  .overflow-container {\n    overflow: hidden;\n    height: calc(100% - 60px);\n\n    .main-content {\n      overflow-y: auto;\n      height: 100%;\n    }\n  }\n\n  .card-row {\n    margin-bottom: 20px;\n    &.last {\n      margin-bottom: 0px;\n    }\n  }\n\n  .card-holder {\n    flex: 1;\n\n    .card {\n      height: 100%;\n      img {\n        margin: 4px;\n      }\n\n      &.selected {\n        img {\n          margin: 0px;\n          border: 4px solid blue;\n        }\n      }\n\n      &:hover {\n        img {\n          margin: 0px;\n          border: 4px solid yellow;\n        }\n      }\n    }\n  }\n\n  .banner {\n    width: 150px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShipAssigner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShipAssigner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShipAssigner.vue?vue&type=template&id=4907069f&scoped=true&\"\nimport script from \"./ShipAssigner.vue?vue&type=script&lang=js&\"\nexport * from \"./ShipAssigner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShipAssigner.vue?vue&type=style&index=0&id=4907069f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4907069f\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"ui-layer\" :style=\"{ width: `${uiWidth}px` }\">\n    <div v-if=\"menuOpen\" class=\"menu-closer\">\n      <div v-if=\"menuOpen == 'settings'\" class=\"menu center limit-size\">\n        <div class=\"settings\">\n          <h3>Volume</h3>\n          <div>\n            <div class=\"slider-setting\">\n              <div class=\"label\">Overall</div>\n              <div class=\"slider-holder center-div\">\n                <input type=\"range\" min=\"0\" max=\"100\" v-model=\"overallSlider\" class=\"slider\" />\n              </div>\n              <div class=\"volume-icon\" @click.stop=\"toggleMuteOverall\">\n                <img v-show=\"!overallVolumeMute\" src=\"img/volume.png\" />\n                <img v-show=\"overallVolumeMute\" src=\"img/volume_mute.png\" />\n              </div>\n              <div class=\"label right\">{{ Math.floor(overallVolume * 100) }}%</div>\n            </div>\n\n            <div class=\"slider-setting\">\n              <div class=\"label\">BGM</div>\n              <div class=\"slider-holder center-div\">\n                <input type=\"range\" min=\"0\" max=\"100\" v-model=\"bgmSlider\" class=\"slider\" />\n              </div>\n              <div class=\"volume-icon\" @click.stop=\"toggleMuteBgm\">\n                <img v-show=\"!bgmVolumeMute\" src=\"img/volume.png\" />\n                <img v-show=\"bgmVolumeMute\" src=\"img/volume_mute.png\" />\n              </div>\n              <div class=\"label right\">{{ Math.floor(bgmVolume * 100) }}%</div>\n            </div>\n\n            <div class=\"slider-setting\">\n              <div class=\"label\">SE</div>\n              <div class=\"slider-holder center-div\">\n                <input type=\"range\" min=\"0\" max=\"100\" v-model=\"seSlider\" class=\"slider\" />\n              </div>\n              <div class=\"volume-icon\" @click.stop=\"toggleMuteSe\">\n                <img v-show=\"!seVolumeMute\" src=\"img/volume.png\" />\n                <img v-show=\"seVolumeMute\" src=\"img/volume_mute.png\" />\n              </div>\n              <div class=\"label right\">{{ Math.floor(seVolume * 100) }}%</div>\n            </div>\n\n            <div class=\"slider-setting\">\n              <div class=\"label\">Voice</div>\n              <div class=\"slider-holder center-div\">\n                <input type=\"range\" min=\"0\" max=\"100\" v-model=\"voiceSlider\" class=\"slider\" />\n              </div>\n              <div class=\"volume-icon\" @click.stop=\"toggleMuteVoice\">\n                <img v-show=\"!voiceVolumeMute\" src=\"img/volume.png\" />\n                <img v-show=\"voiceVolumeMute\" src=\"img/volume_mute.png\" />\n              </div>\n              <div class=\"label right\">{{ Math.floor(voiceVolume * 100) }}%</div>\n            </div>\n          </div>\n\n          <h3>Ship</h3>\n          <div>\n            <div class=\"ship-setting\">\n              <div\n                class=\"label\"\n              >Enable any line from all models to be used regardless of current ship model.</div>\n              <div>\n                <div\n                  class=\"checkbox\"\n                  :class=\"{ unchecked: !useAllModelLines }\"\n                  @click=\"toggleAllModelLines\"\n                >\n                  <span></span>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"ship-setting\" :class=\"{ disabled: useSpecialLinesOnly }\">\n              <div\n                class=\"label\"\n              >Enable miscellaneous lines (like equipment and resupply) as bonus lines.</div>\n              <div>\n                <div\n                  class=\"checkbox\"\n                  :class=\"{ unchecked: !useBonusLines }\"\n                  @click=\"toggleBonusLines\"\n                >\n                  <span></span>\n                </div>\n              </div>\n            </div>\n            <div class=\"ship-setting\">\n              <div class=\"label\">Enable ship's special occasion lines.</div>\n              <div>\n                <div\n                  class=\"checkbox\"\n                  :class=\"{ unchecked: !useSpecialLines }\"\n                  @click=\"toggleSpecialLines\"\n                >\n                  <span></span>\n                </div>\n              </div>\n            </div>\n            <div class=\"ship-setting\" :class=\"{ disabled: !useSpecialLines }\">\n              <div class=\"sub-label\"> Only use special occasion lines.</div>\n              <div>\n                <div\n                  class=\"checkbox\"\n                  :class=\"{ unchecked: !useSpecialLinesOnly }\"\n                  @click=\"toggleUseSpecialLinesOnly\"\n                >\n                  <span></span>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"ship-setting\" :class=\"{ disabled: useSpecialLinesOnly }\">\n              <div class=\"label\">Enable Idle lines.</div>\n              <div>\n                <div\n                  class=\"checkbox\"\n                  :class=\"{ unchecked: !useIdleLines }\"\n                  @click=\"toggleIdleLines\"\n                >\n                  <span></span>\n                </div>\n              </div>\n            </div>\n            <div class=\"slider-setting\" :class=\"{ disabled: useSpecialLinesOnly || !useIdleLines }\">\n              <div class=\"label\">Idle</div>\n              <div class=\"slider-holder center-div\">\n                <input\n                  type=\"range\"\n                  min=\"1\"\n                  max=\"12\"\n                  v-model=\"idleLineWaitSlider\"\n                  class=\"slider\"\n                  :class=\"{ disabled: useSpecialLinesOnly || !useIdleLines }\"\n                />\n              </div>\n              <div class=\"label right\" style=\"margin-left: 10px;\">{{ Math.floor(idleLineWait) }} min</div>\n            </div>\n          </div>\n\n          <!-- Buttons -->\n          <h3>Misc</h3>\n          <div class=\"d-flex\" style=\"padding-bottom: 20px;\">\n            <button class=\"standard-button info\" @click=\"openBgm\">Change BGM</button>\n            <button\n              class=\"standard-button\"\n              :class=\"{ 'info': hideButtons, 'danger': !hideButtons }\"\n              style=\"margin-left: 5px\"\n              @click=\"toggleHideButtons()\"\n            >\n              <div style=\"width: 60px\">{{ hideButtons ? \"Show\" : \"Hide\" }} UI</div>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"menuOpen == 'composition'\" class=\"menu center-div composition\">\n        <ShipAssigner\n          @shipChanged=\"shipChanged()\"\n          @closeMenu=\"closeMenu()\"\n          @buttonPress=\"genericButtonPress()\"\n        />\n      </div>\n\n      <div v-if=\"menuOpen == 'bgm'\" class=\"menu center-div\">\n        <BGM @buttonPress=\"genericButtonPress()\" />\n      </div>\n\n      <div class=\"back-button-holder center-div\">\n        <button v-if=\"menuOpen == 'bgm'\" class=\"standard-button info\" @click=\"openSettings\">Back</button>\n        <button\n          v-else-if=\"Boolean(menuOpen)\"\n          class=\"standard-button info\"\n          @click=\"closeMenu()\"\n        >Close</button>\n      </div>\n    </div>\n\n\n    <div class=\"button-wrapper\" :class=\"{ 'min-mode': belowMin }\">\n      <div class=\"buttons-left\">\n        <!-- Sortie button -->\n        <div\n          class=\"sortie-button\"\n          :class=\"{ 'set-transparent': hideButtons, disabled: disableSortieButton, clickable: !disableSortieButton, 'min-mode': belowMin }\"\n          @mouseover=\"setButtonHoverState('sortieButtonHover', true)\"\n          @mouseleave=\"setButtonHoverState('sortieButtonHover', false)\"\n          @click=\"sortieShip\"\n        >\n          <img v-show=\"!sortieButtonHover\" src=\"img/sortie_button.png\" :width=\"sortieButtonWidth\" />\n          <div v-show=\"sortieButtonHover\" class=\"fixed\" style=\"pointer-events: none;\">\n            <img src=\"img/sortie_button_highlighted_part1.png\" :width=\"sortieButtonWidth\" />\n            <img\n              src=\"img/sortie_button_highlighted_part2.png\"\n              class=\"absolute highlight-button\"\n              style=\"top: 0; left: 0;\"\n              :width=\"sortieButtonWidth\"\n            />\n            <img\n              src=\"img/sortie_button_highlighted_part3.png\"\n              class=\"absolute\"\n              style=\"top: 0; left: 0;\"\n              :width=\"sortieButtonWidth\"\n            />\n          </div>\n        </div>\n\n        <!-- Ship change button -->\n        <div\n          v-if=\"!combatMode\"\n          class=\"composition-button\"\n          :class=\"{ 'set-transparent': hideButtons, disabled: disableCompositionButton, clickable: !disableCompositionButton, 'min-mode': belowMin }\"\n          @mouseover=\"setButtonHoverState('compositionButtonHover', true)\"\n          @mouseleave=\"setButtonHoverState('compositionButtonHover', false)\"\n          :style=\"{ bottom: belowMin ? '0px' : `${13 + Math.max(compositionButtonHeight * 1.5, compositionButtonMinHeight)}px` }\"\n          @click=\"changeShip\"\n        >\n          <img\n            v-show=\"!compositionButtonHover\"\n            src=\"img/composition_button.png\"\n            :width=\"compositionButtonWidth\"\n          />\n          <div v-show=\"compositionButtonHover\" class=\"fixed\" style=\"pointer-events: none;\">\n            <img\n              src=\"img/highlight_button.png\"\n              class=\"highlight-button\"\n              :width=\"compositionButtonWidth\"\n            />\n            <img\n              src=\"img/composition_button_highlight.png\"\n              class=\"absolute\"\n              style=\"top: 0; left: 0;\"\n              :width=\"compositionButtonWidth\"\n            />\n          </div>\n        </div>\n\n        <!-- Repair button -->\n        <div\n          v-if=\"!combatMode\"\n          class=\"repair-button\"\n          :class=\"{ 'set-transparent': hideButtons, disabled: disableRepairButton, clickable: !disableRepairButton, 'min-mode': belowMin }\"\n          @mouseover=\"setButtonHoverState('repairButtonHover', true)\"\n          @mouseleave=\"setButtonHoverState('repairButtonHover', false)\"\n          :style=\"{ left: belowMin ? '0px' : `${16 + Math.max(compositionButtonWidth * 1.5, compositionButtonMinWidth)}px` }\"\n          @click=\"repairShip\"\n        >\n          <img v-show=\"!repairButtonHover\" src=\"img/docking_button.png\" :width=\"repairButtonWidth\" />\n          <div v-show=\"repairButtonHover\" class=\"fixed\" style=\"pointer-events: none;\">\n            <img\n              src=\"img/highlight_button.png\"\n              class=\"highlight-button\"\n              :width=\"compositionButtonWidth\"\n            />\n            <img\n              src=\"img/docking_button_highlight.png\"\n              class=\"absolute\"\n              style=\"top: 0; left: 0;\"\n              :width=\"compositionButtonWidth\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"buttons-center\" />\n      \n      <div class=\"buttons-right\">\n        <!-- Settings menu button -->\n        <div\n          class=\"settings-button clickable center-div\"\n          :class=\"{ 'set-transparent': hideButtons, 'min-mode': belowMin }\"\n          @mouseover=\"settingsButtonHover = true\"\n          @mouseleave=\"settingsButtonHover = false\"\n          @click=\"openSettings\"\n        >\n          <img v-show=\"!settingsButtonHover\" src=\"img/settings.png\" />\n          <img v-show=\"settingsButtonHover\" src=\"img/settings_highlighted.png\" />\n        </div>\n      </div>\n    </div>\n\n    <!-- Subtitles -->\n    <div class=\"subtitles-container center-div\">\n      <div\n        v-show=\"Boolean(subtitle)\"\n        class=\"subtitles\"\n        :style=\"{ 'max-width': subtitleMaxWidth }\"\n      >{{ subtitle }}</div>\n    </div>\n\n    <!-- Top left title -->\n    <div class=\"title-container\">\n      <div v-show=\"Boolean(title)\" class=\"title\">{{ title }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\n\nimport BGM from \"./BGM.vue\";\nimport ShipAssigner from \"./ShipAssigner.vue\";\n\nexport default {\n  name: \"UILayer\",\n  components: {\n    BGM,\n    ShipAssigner\n  },\n  data() {\n    return {\n      audio: {},\n\n      compositionButtonWidth: null,\n      compositionButtonHeight: null,\n      compositionButtonMinWidth: 90,\n      compositionButtonMinHeight: (90 / 249.0) * 198,\n      sortieButtonWidth: null,\n      repairButtonWidth: null,\n      subtitleMaxWidth: null,\n\n      uiWidth: null,\n      windowWidth: null,\n      windowHeight: null,\n      menuOpen: null,\n      hideButtons: false,\n\n      compositionButtonHover: false,\n      sortieButtonHover: false,\n      repairButtonHover: false,\n      settingsButtonHover: false,\n\n      disableShipButtons: false,\n      disableShipComposition: false,\n      disableShipRepair: false,\n      disableShipSortie: false\n    };\n  },\n  computed: {\n    ...mapGetters({\n      subtitle: \"subtitle\",\n      title: \"title\",\n      seDB: \"SEs\",\n\n      useAllModelLines: \"useAllModelLines\",\n      useIdleLines: \"useIdleLines\",\n      useSpecialLines: \"useSpecialLines\",\n      useSpecialLinesOnly: \"useSpecialLinesOnly\",\n      useBonusLines: \"useBonusLines\",\n\n      finalSeVolume: \"seVolume\",\n\n      combatMode: \"combatMode\",\n      damagedMode: \"damagedMode\"\n    }),\n    ...mapState({\n      overallVolume: s => s.main.overallVolume,\n      bgmVolume: s => s.main.bgmVolume,\n      seVolume: s => s.main.seVolume,\n      voiceVolume: s => s.main.voiceVolume,\n\n      overallVolumeMute: s => s.main.overallVolumeMute,\n      bgmVolumeMute: s => s.main.bgmVolumeMute,\n      seVolumeMute: s => s.main.seVolumeMute,\n      voiceVolumeMute: s => s.main.voiceVolumeMute,\n\n      idleLineWait: s => s.main.idleLineWait\n    }),\n    disableSortieButton() {\n      return this.disableShipButtons || this.disableShipSortie || this.menuOpen;\n    },\n    disableCompositionButton() {\n      return this.disableShipButtons || this.disableShipComposition || this.menuOpen;\n    },\n    belowMinWidth() {\n      return this.windowWidth < window.__minSize.width;\n    },\n    belowMinHeight() {\n      return this.windowHeight < window.__minSize.height;\n    },\n    belowMin() {\n      return this.belowMinWidth || this.belowMinHeight;\n    },\n    disableRepairButton() {\n      return (\n        this.disableShipButtons ||\n        this.disableShipRepair ||\n        this.menuOpen\n      );\n    },\n    overallSlider: {\n      get() {\n        return this.overallVolume * 100;\n      },\n      set(value) {\n        this.$store.commit(\"setOverallVolume\", value / 100.0);\n      }\n    },\n    bgmSlider: {\n      get() {\n        return this.bgmVolume * 100;\n      },\n      set(value) {\n        this.$store.commit(\"setBgmVolume\", value / 100.0);\n      }\n    },\n    seSlider: {\n      get() {\n        return this.seVolume * 100;\n      },\n      set(value) {\n        this.$store.commit(\"setSeVolume\", value / 100.0);\n      }\n    },\n    voiceSlider: {\n      get() {\n        return this.voiceVolume * 100;\n      },\n      set(value) {\n        this.$store.commit(\"setVoiceVolume\", value / 100.0);\n      }\n    },\n    idleLineWaitSlider: {\n      get() {\n        return this.idleLineWait / 5;\n      },\n      set(value) {\n        this.$store.commit(\"setIdleLineWait\", value * 5);\n      }\n    }\n  },\n  watch: {\n    finalSeVolume() {\n      Object.keys(this.audio).map(key => {\n        this.audio[key].volume = this.finalSeVolume;\n      });\n    },\n    combatMode() {\n      this.disableShipButtons = false;\n      this.disableShipComposition = false;\n      this.disableShipRepair = false;\n    }\n  },\n  created() {\n    this.createSeAudio();\n  },\n  async mounted() {\n    this.resizeUI();\n    window.addEventListener(\"resize\", this.resizeUI);\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.resizeUI);\n\n    Object.keys(this.audio).map(key => {\n      this.audio[key].pause();\n      this.audio[key].src = \"\";\n      this.audio[key] = null;\n    });\n    this.audio = null;\n  },\n  methods: {\n    // To get the correct ratio\n    calculateWidthFromHeight(naturalWidth, naturalHeight, currentHeight) {\n      return (currentHeight * naturalWidth) / (naturalHeight * 1.0);\n    },\n    closeMenu(suppressAudio) {\n      if (!suppressAudio) {\n        this.playSeAudio(\"Return\");\n      }\n      this.menuOpen = null;\n    },\n    createSeAudio() {\n      if (!this.seDB) {\n        logError(\"[UILayer][createSeAudio] seDB not found\");\n        return;\n      }\n      Object.keys(this.seDB).map(key => {\n        this.audio[key] = new Audio();\n        this.audio[key].volume = this.finalSeVolume;\n        this.audio[key].src = this.seDB[key];\n        this.audio[key].load();\n      });\n    },\n    genericButtonPress() {\n      this.playSeAudio(\"Accept/Cancel Quest\");\n    },\n    shipChanged() {\n      this.playSeAudio(\"Assigning Ship\");\n      this.closeMenu(true);\n    },\n    openMenu(name) {\n      if (this.menuOpen != name) {\n        this.menuOpen = name;\n        return true;\n      } else {\n        this.closeMenu();\n        return false;\n      }\n    },\n    openSettings() {\n      if (this.openMenu(\"settings\")) {\n        this.playSeAudio(\"Return\");\n      }\n    },\n    openBgm() {\n      if (this.openMenu(\"bgm\")) {\n        this.playSeAudio(\"Accept/Cancel Quest\");\n      }\n    },\n    toggleMuteOverall() {\n      this.$store.commit(\"setOverallVolumeMute\", !this.overallVolumeMute);\n      this.playSeAudio(\"Unlocking Ship/Equipment\");\n    },\n    toggleMuteBgm() {\n      this.$store.commit(\"setBgmVolumeMute\", !this.bgmVolumeMute);\n      this.playSeAudio(\"Unlocking Ship/Equipment\");\n    },\n    toggleMuteSe() {\n      this.$store.commit(\"setSeVolumeMute\", !this.seVolumeMute);\n      this.playSeAudio(\"Unlocking Ship/Equipment\");\n    },\n    toggleMuteVoice() {\n      this.$store.commit(\"setVoiceVolumeMute\", !this.voiceVolumeMute);\n      this.playSeAudio(\"Unlocking Ship/Equipment\");\n    },\n    toggleHideButtons() {\n      this.playSeAudio(\"Accept/Cancel Quest\");\n      this.hideButtons = !this.hideButtons;\n    },\n    resizeUI() {\n      try {\n        this.uiWidth = this.calculateWidthFromHeight(\n          __room.naturalWidth,\n          __room.naturalHeight,\n          window.innerHeight\n        );\n        this.windowWidth = window.innerWidth;\n        this.windowHeight = window.innerHeight;\n        let widthToUse = Math.min(this.uiWidth, window.innerWidth);\n        this.subtitleMaxWidth = widthToUse < 500 ? null : \"60%\";\n        this.compositionButtonWidth = this.belowMin ? \"100%\" : widthToUse * 0.1;\n        this.compositionButtonHeight = this.belowMin ? null : \n          (this.compositionButtonWidth / 249.0) * 198;\n        this.sortieButtonWidth = this.belowMin ? \"100%\" : widthToUse * 0.15;\n        this.repairButtonWidth = this.belowMin ? \"100%\" : widthToUse * 0.1;\n      } catch (e) {\n        window.logError(\"[App] Error in resize. \", e);\n      }\n    },\n    setButtonHoverState(buttonName, state) {\n      let relation = {\n        sortieButtonHover: \"disableSortieButton\",\n        compositionButtonHover: \"disableCompositionButton\",\n        repairButtonHover: \"disableRepairButton\"\n      };\n\n      // If the button corresponding does not exist, return\n      if (!relation[buttonName]) {\n        return;\n      }\n      let disabled = this[relation[buttonName]];\n      if (!disabled) {\n        this[buttonName] = state;\n      }\n    },\n    changeShip() {\n      if (this.disableCompositionButton) {\n        return;\n      }\n      this.setButtonHoverState('compositionButtonHover', false);\n      if (this.openMenu(\"composition\")) {\n        this.playSeAudio(\"Select\");\n      }\n    },\n    sortieShip() {\n      if (this.disableSortieButton) {\n        return;\n      }\n      this.setButtonHoverState('sortieButtonHover', false);\n      this.disableShipButtons = true;\n      this.disableShipComposition = true;\n      this.disableShipRepair = true;\n\n      this.sortieButtonHover = false;\n\n      this.playSeAudio(\"Select\");\n      if (!this.combatMode) {\n        window.dispatchEvent(new CustomEvent(\"battleStart\"));\n      } else {\n        window.dispatchEvent(new CustomEvent(\"battleEnd\"));\n      }\n    },\n    repairShip() {\n      if (this.disableRepairButton) {\n        return;\n      }\n      this.setButtonHoverState('repairButtonHover', false);\n      this.playSeAudio(\"Resupply\");\n      this.$store.commit(\"setDamagedMode\", !this.damagedMode);\n    },\n    toggleAllModelLines() {\n      this.playSeAudio(\"Accept/Cancel Quest\");\n      this.$store.commit(\"setUseAllModelLines\", !this.useAllModelLines);\n    },\n    toggleIdleLines() {\n      if (!this.useSpecialLinesOnly) {\n        this.playSeAudio(\"Accept/Cancel Quest\");\n        this.$store.commit(\"setUseIdleLines\", !this.useIdleLines);\n      }\n    },\n    toggleBonusLines() {\n      if (!this.useSpecialLinesOnly) {\n        this.playSeAudio(\"Accept/Cancel Quest\");\n        this.$store.commit(\"setUseBonusLines\", !this.useBonusLines);\n      }\n    },\n    toggleSpecialLines() {\n      this.playSeAudio(\"Accept/Cancel Quest\");\n      this.$store.commit(\"setUseSpecialLines\", !this.useSpecialLines);\n    },\n    toggleUseSpecialLinesOnly() {\n      // Only allow change if special lines is active\n      if (this.useSpecialLines) {\n        this.playSeAudio(\"Accept/Cancel Quest\");\n        this.$store.commit(\"setUseSpecialLinesOnly\", !this.useSpecialLinesOnly);\n      }\n    },\n    playSeAudio(seName) {\n      if (!seName || !this.seDB || !this.seDB[seName]) {\n        return;\n      }\n\n      if (!this.audio[seName]) {\n        this.audio[seName] = new Audio();\n        this.audio[seName].volume = this.seVolume;\n        this.audio[seName].src = this.seDB[seName];\n        this.audio[seName].load();\n      } else {\n        this.audio[seName].pause();\n        this.audio[seName].currentTime = 0;\n      }\n      this.audio[seName].play();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ui-layer {\n  position: relative;\n  height: 100%;\n\n  .set-transparent {\n    opacity: 0;\n  }\n\n  div {\n    pointer-events: auto;\n  }\n\n  .slider-setting {\n    display: flex;\n    margin-bottom: 5px;\n\n    .label {\n      display: flex;\n      align-items: center;\n      width: 60px;\n\n      &.right {\n        width: 50px;\n        justify-content: flex-end;\n      }\n    }\n\n    .volume-icon {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      margin-right: -5px;\n\n      img {\n        height: 20px;\n      }\n    }\n  }\n\n  .ship-setting {\n    display: flex;\n    margin-bottom: 5px;\n\n    .label {\n      display: flex;\n      align-items: center;\n      flex: 1;\n    }\n\n    .sub-label {\n      margin-left: 10px;\n      flex: 1;\n    }\n\n    .checkbox {\n      background-color: black;\n      display: flex;\n      align-items: center;\n\n      &.unchecked {\n        span {\n          opacity: 0;\n        }\n      }\n    }\n  }\n\n  .slider-holder {\n    flex: 1;\n\n    .slider {\n      -webkit-appearance: none;\n      width: 100%;\n      height: 5px;\n      border-radius: 5px;\n      background: #d3d3d3;\n      outline: none;\n      opacity: 0.7;\n      -webkit-transition: 0.2s;\n      transition: opacity 0.2s;\n    }\n\n    .slider::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      appearance: none;\n      width: 20px;\n      height: 20px;\n      border-radius: 50%;\n      background: #4caf50;\n      cursor: pointer;\n    }\n\n    .slider::-moz-range-thumb {\n      width: 20px;\n      height: 20px;\n      border-radius: 50%;\n      background: #4caf50;\n      cursor: pointer;\n    }\n  }\n\n  .menu-closer {\n    position: relative;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n\n    .back-button-holder {\n      width: 100%;\n      pointer-events: none;\n\n      button {\n        pointer-events: auto;\n      }\n    }\n\n    ::-webkit-scrollbar {\n      display: block;\n      width: 0.4em;\n      height: 0.4em;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n      background: #888;\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n      background: #d1d1d1;\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n      background: #f1f1f1;\n    }\n  }\n\n  .menu {\n    position: relative;\n    margin: 10px auto;\n    background-color: rgba(0, 0, 0, 0.7);\n    width: 80%;\n    height: 65%;\n    color: white;\n    z-index: 100;\n\n    overflow-y: auto;\n\n    &.center {\n      display: flex;\n      justify-content: center;\n    }\n\n    &.composition {\n      height: 85%;\n    }\n\n    &.limit-size {\n      max-width: 500px;\n    }\n  }\n\n  .settings {\n    padding: 0px 20px;\n    max-width: 500px;\n    flex: 1;\n  }\n\n  .title-container {\n    pointer-events: none;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    max-width: 100%;\n    width: 100%;\n\n    display: flex;\n\n    .title {\n      pointer-events: none;\n      text-align: center;\n      margin: 10px;\n      font-size: 4vmin;\n\n      padding: 5px 10px;\n      background-color: rgba(0, 0, 0, 0.8);\n      color: white;\n    }\n  }\n\n  .highlight-button {\n    animation-name: spin360;\n    animation-duration: 8s;\n    animation-timing-function: linear;\n    animation-iteration-count: infinite;\n  }\n\n  .subtitles-container {\n    pointer-events: none;\n    position: absolute;\n    bottom: 2%;\n    left: 0px;\n    max-width: 100%;\n    width: 100%;\n\n    .subtitles {\n      pointer-events: none;\n      text-align: center;\n      margin: 0px 10px;\n      font-size: 4vmin;\n\n      padding: 5px;\n      background-color: rgba(0, 0, 0, 0.8);\n      color: white;\n    }\n  }\n\n  .sortie-button {\n    position: absolute;\n    bottom: 8px;\n    left: 16px;\n\n    img {\n      pointer-events: none;\n      min-width: 90px;\n    }\n\n    &.min-mode {\n      position: static;\n      flex: 2;\n      height: 100%;\n      img {\n        min-width: 0px;\n        height: 100%;\n      }\n    }\n  }\n\n  .composition-button {\n    position: absolute;\n    bottom: 8px;\n    left: 16px;\n\n    img {\n      pointer-events: none;\n      min-width: 60px;\n    }\n\n    &.min-mode {\n      position: static;\n      flex: 1;\n      height: 100%;\n      img {\n        min-width: 0px;\n        height: 100%;\n      }\n    }\n  }\n\n  .repair-button {\n    position: absolute;\n    bottom: 8px;\n    left: 16px;\n\n    img {\n      pointer-events: none;\n      min-width: 60px;\n    }\n\n    &.min-mode {\n      position: static;\n      flex: 1;\n      img {\n        min-width: 0px;\n        height: 100%;\n      }\n    }\n  }\n\n  .settings-button {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    //background-color: #20a0a3;\n    //border-radius: 50%;\n    //height: 40px;\n    //width: 40px;\n\n    img {\n      width: 40px;\n    }\n\n    &.min-mode {\n      position: static;\n      flex: 1;\n      height: 100%;\n\n      img {\n        min-width: 0px;\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n\n  .button-wrapper {\n    &.min-mode {\n      position: absolute;\n      bottom: 2%;\n      left: 2%;\n      right: 2%;\n\n      display: flex;\n      align-items: flex-end;\n      justify-content: center;\n      max-height: 20%;\n\n      .buttons-left {\n        display: flex;\n        width: 40%;\n        align-items: flex-end;\n      }\n\n      .buttons-center {\n        width: 50%;\n      }\n\n      .buttons-right {\n        display: flex;\n        align-items: flex-end;\n        width: 10%;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UILayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UILayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UILayer.vue?vue&type=template&id=477c36c2&scoped=true&\"\nimport script from \"./UILayer.vue?vue&type=script&lang=js&\"\nexport * from \"./UILayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UILayer.vue?vue&type=style&index=0&id=477c36c2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"477c36c2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading-screen-container center-div\"},[_c('div',{staticClass:\"loading-screen center-div\",class:{ 'show': _vm.showFadeScreen }},[_c('img',{attrs:{\"src\":\"img/loading.gif\",\"width\":_vm.loaderWidth}}),_c('div',{staticClass:\"disclaimer-container center-div\"},[_c('div',{staticClass:\"disclaimer\",style:({ 'max-width': _vm.screenWidth })},[_vm._v(_vm._s(_vm.disclaimer))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"loading-screen-container center-div\">\n    <div class=\"loading-screen center-div\" :class=\"{ 'show': showFadeScreen }\">\n      <img src=\"img/loading.gif\" :width=\"loaderWidth\" />\n\n      <!-- Disclaimer -->\n      <div class=\"disclaimer-container center-div\">\n        <div class=\"disclaimer\" :style=\"{ 'max-width': screenWidth }\">{{ disclaimer }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"LoadingScreen\",\n  data() {\n    return {\n      screenWidth: null,\n      showFadeScreen: false,\n      loaderWidth: null,\n      loadLine: new Audio() // Line for the loading screen (ship bouncing)\n    };\n  },\n  computed: {\n    ...mapGetters({\n      voiceVolume: \"voiceVolume\",\n      titleDB: \"titleLines\",\n      disclaimer: \"disclaimer\"\n    })\n  },\n  created() {\n    this.loadLine.volume = this.voiceVolume;\n\n    // Load a random line from \"Kancolle\" event\n    if (!this.titleDB) {\n      return;\n    }\n\n    // Set the loadLine\n    this.loadLine.src = this.getRandomEventFileNameFromList(\n      this.titleDB.TitleCall02\n    );\n    this.loadLine.load();\n    this.loadLine.onended = () => {\n      this.loadLine.src = \"\";\n      this.loadLine = null;\n      window.dispatchEvent(new CustomEvent(\"loadLineEnded\"));\n    };\n\n    this.calculateGifWidth();\n\n    window.addEventListener(\"playLoadLine\", this.playLoadLine);\n    window.addEventListener(\"resize\", this.calculateGifWidth);\n    window.addEventListener(\"showFadeScreen\", this.showFadeScreenFunc);\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.calculateGifWidth);\n    window.removeEventListener(\"playLoadLine\", this.playLoadLine);\n    window.removeEventListener(\"showFadeScreen\", this.showFadeScreenFunc);\n  },\n  methods: {\n    playLoadLine() {\n      console.log(\"[LoadingScreen] Playing load line\");\n      this.loadLine.play();\n    },\n    showFadeScreenFunc() {\n      this.showFadeScreen = true;\n      window.setTimeout(() => {\n        this.showFadeScreen = false;\n      }, 3000);\n    },\n    // To get the correct ratio\n    calculateWidthFromHeight(naturalWidth, naturalHeight, currentHeight) {\n      return (currentHeight * naturalWidth) / (naturalHeight * 1.0);\n    },\n    calculateGifWidth() {\n      try {\n        this.screenWidth = this.calculateWidthFromHeight(\n          __room.naturalWidth,\n          __room.naturalHeight,\n          window.innerHeight\n        );\n        this.loaderWidth = this.screenWidth * 0.15;\n      } catch (e) {\n        logError(\"[TitleScreen] Error in resize. \", e);\n      }\n    },\n    getRandomEventFileNameFromList(list) {\n      if (!list || list.length == 0) {\n        return \"\";\n      }\n      try {\n        let currentEvent = list[Math.floor(Math.random() * list.length)];\n        return currentEvent.File;\n      } catch (e) {\n        window.logError(\n          \"[TitleScreen] Error in 'getRandomEventFileNameFromList'.\",\n          e\n        );\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.loading-screen {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  opacity: 1;\n  transition: opacity 1.5s ease-out;\n  background-color: black;\n  pointer-events: none;\n\n  img {\n    min-width: 150px;\n  }\n\n  &.show {\n    opacity: 0;\n  }\n\n  .disclaimer-container {\n    pointer-events: none;\n    position: absolute;\n    bottom: 2%;\n    left: 0px;\n    max-width: 100%;\n    width: 100%;\n\n    .disclaimer {\n      pointer-events: none;\n      text-align: center;\n      margin: 0px 10px;\n      font-size: 0.7em; //2vmin;\n\n      padding: 5px;\n      color: rgba(255, 255, 255, 0.2);\n    }\n  }\n}\n\n.loading-screen-container {\n  height: 100%;\n  width: 100%;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  display: block;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadingScreen.vue?vue&type=template&id=2e72b635&scoped=true&\"\nimport script from \"./LoadingScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadingScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoadingScreen.vue?vue&type=style&index=0&id=2e72b635&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e72b635\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-screen center-div\"},[_vm._m(0),_c('div',{staticClass:\"title-foreground center-div\"},[_c('div',{staticClass:\"title-foreground-center-container\"},[_c('div',{staticClass:\"title-logo-wrapper unclickable\"},[_c('img',{staticClass:\"title-logo unclickable\",class:{ 'min-mode': _vm.belowMin },style:({ 'width': _vm.logoWidth, 'max-height': _vm.logoMaxHeight, 'max-width': (_vm.maxWidth + \"px\") }),attrs:{\"src\":\"img/kancolle_logo.png\"}})]),_c('div',{staticClass:\"center-div\"},[_c('div',{staticClass:\"start-button center-div clickable\",class:{ 'min-mode': _vm.belowMin },style:({ 'margin-top': (_vm.logoMargin + \"px\"), 'width': _vm.logoWidth, }),on:{\"mouseover\":function($event){_vm.startButtonHover = true},\"mouseleave\":function($event){_vm.startButtonHover = false},\"click\":function($event){$event.stopPropagation();return _vm.startGame.apply(null, arguments)}}},[(_vm.startButtonClicked)?_c('img',{staticClass:\"unclickable\",style:({ 'max-width': (_vm.maxWidth + \"px\") }),attrs:{\"src\":\"img/game_start_button_clicked.png\",\"width\":\"100%\"}}):(_vm.startButtonHover)?_c('img',{staticClass:\"unclickable\",style:({ 'max-width': (_vm.maxWidth + \"px\") }),attrs:{\"src\":\"img/game_start_button_highlighted.png\",\"width\":\"100%\"}}):_c('img',{staticClass:\"unclickable\",style:({ 'max-width': (_vm.maxWidth + \"px\") }),attrs:{\"src\":\"img/game_start_button.png\",\"width\":\"100%\"}})])])])]),_c('div',{staticClass:\"disclaimer-container center-div\",class:{ 'min-mode': _vm.belowMin }},[_c('div',{staticClass:\"disclaimer\",style:({ 'max-width': (_vm.maxWidth + \"px\") })},[_vm._v(_vm._s(_vm.disclaimer))])]),_c('div',{staticClass:\"fade-out-screen\",class:{ 'show': _vm.showFadeScreen }})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"background-image\"},[_c('img',{attrs:{\"src\":\"img/bg_h.png\",\"height\":\"100%\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"title-screen center-div\">\n    <div class=\"background-image\">\n      <img src=\"img/bg_h.png\" height=\"100%\" />\n    </div>\n    <div class=\"title-foreground center-div\">\n      <div class=\"title-foreground-center-container\">\n        <div class=\"title-logo-wrapper unclickable\">\n          <img \n            src=\"img/kancolle_logo.png\" \n            class=\"title-logo unclickable\"\n            :class=\"{ 'min-mode': belowMin }\"\n            :style=\"{ 'width': logoWidth, 'max-height': logoMaxHeight, 'max-width': `${maxWidth}px` }\" \n          />\n        </div>\n\n        <div class=\"center-div\">\n          <div\n            class=\"start-button center-div clickable\"\n            :class=\"{ 'min-mode': belowMin }\"\n            :style=\"{ 'margin-top': `${logoMargin}px`, 'width': logoWidth, }\"\n            @mouseover=\"startButtonHover = true\"\n            @mouseleave=\"startButtonHover = false\"\n            @click.stop=\"startGame\"\n          >\n            <img \n              v-if=\"startButtonClicked\"\n              class=\"unclickable\"\n              src=\"img/game_start_button_clicked.png\"\n              width=\"100%\"\n              :style=\"{ 'max-width': `${maxWidth}px` }\" \n            />\n            <img\n              v-else-if=\"startButtonHover\"\n              class=\"unclickable\"\n              src=\"img/game_start_button_highlighted.png\"\n              width=\"100%\"\n              :style=\"{ 'max-width': `${maxWidth}px` }\" \n            />\n            <img v-else\n              class=\"unclickable\"\n              src=\"img/game_start_button.png\"\n              width=\"100%\"\n              :style=\"{ 'max-width': `${maxWidth}px` }\" \n            />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Disclaimer -->\n    <div class=\"disclaimer-container center-div\" :class=\"{ 'min-mode': belowMin }\">\n      <div class=\"disclaimer\" :style=\"{ 'max-width': `${maxWidth}px` }\">{{ disclaimer }}</div>\n    </div>\n\n    <div class=\"fade-out-screen\" :class=\"{ 'show': showFadeScreen }\" />\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"TitleScreen\",\n  data() {\n    return {\n      screenWidth: null,\n      screenHeight: null,\n\n      logoWidth: null,\n      logoMaxHeight: null, \n      logoMargin: null,\n      showFadeScreen: false,\n      startButtonHover: false,\n      startButtonClicked: false,\n\n      loadCounter: 0,\n      loadLimit: 6,\n      \n      kancolleStartLine: new Audio() // Line for clicking the start button\n    };\n  },\n  computed: {\n    ...mapGetters({\n      voiceVolume: \"voiceVolume\",\n      titleDB: \"titleLines\",\n      disclaimer: \"disclaimer\"\n    }),\n    screenHeightPixels() {\n      return `${this.screenHeight}px`;\n    },\n    belowMinWidth() {\n      return this.screenWidth < window.__minSize.width;\n    },\n    belowMinHeight() {\n      return this.screenHeight < window.__minSize.height;\n    },\n    belowMin() {\n      return this.belowMinWidth || this.belowMinHeight;\n    },\n    maxWidth() {\n      return this.screenHeight / 720.0 * 1200.0;\n    },\n  },\n  created() {\n    window.dispatchEvent(new CustomEvent(\"startLoad\"));\n    this.calculateScreenWidth();\n    this.kancolleStartLine.volume = this.voiceVolume;\n\n    // Load a random line from \"Kancolle\" event\n    if (!this.titleDB) {\n      return;\n    }\n\n    // Set the startLine\n    this.kancolleStartLine.oncanplaythrough = () => {\n      this.onLoad(\"audio\");\n    };\n    this.kancolleStartLine.src = this.getRandomEventFileNameFromList(\n      this.titleDB.TitleCall01\n    );\n    if (this.kancolleStartLine.src) {\n      this.kancolleStartLine.load();\n      this.kancolleStartLine.onended = () => {\n        this.kancolleStartLine.src = \"\";\n        this.kancolleStartLine = null;\n      };\n    }\n\n    // Load images\n    let imageList = [\n      \"img/bg_h.png\",\n      \"img/kancolle_logo.png\",\n      \"img/game_start_button_clicked.png\",\n      \"img/game_start_button_highlighted.png\",\n      \"img/game_start_button.png\",\n    ];\n    imageList.forEach(img => this.$store.dispatch('loadImage', {\n      imagePath: img,\n      postLoad: () => {\n        this.onLoad(img);\n      },\n    }))\n\n    window.addEventListener(\"resize\", this.calculateScreenWidth);\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"resize\", this.calculateScreenWidth);\n  },\n  methods: {\n    onLoad(loadedItem) {\n      this.loadCounter++;\n      console.log(\"[TitleScreen] Loaded\", loadedItem);\n      if (this.loadCounter >= this.loadLimit) {\n        window.dispatchEvent(new CustomEvent(\"endLoad\"));\n      }\n    },\n    // To get the correct ratio\n    calculateWidthFromHeight(naturalWidth, naturalHeight, currentHeight) {\n      return (currentHeight * naturalWidth) / (naturalHeight * 1.0);\n    },\n    getRandomEventFileNameFromList(list) {\n      if (!list || list.length == 0) {\n        return \"\";\n      }\n      try {\n        let currentEvent = list[Math.floor(Math.random() * list.length)];\n        return currentEvent.File;\n      } catch (e) {\n        window.logError(\n          \"[TitleScreen] Error in 'getRandomEventFileNameFromList'.\",\n          e\n        );\n      }\n    },\n    calculateScreenWidth() {\n      try {\n        this.screenWidth = this.calculateWidthFromHeight(\n          __room.naturalWidth,\n          __room.naturalHeight,\n          window.innerHeight\n        );\n        this.screenHeight = window.innerHeight;\n        this.screenWidth = window.innerWidth;\n        this.logoWidth = this.belowMin ? \"50%\" : `${Math.min(0.3 * this.screenWidth, window.innerWidth)}px`;\n        this.logoMaxHeight = this.belowMin ? \"25%\" : null;\n        this.logoMargin = window.innerHeight * 0.05;\n      } catch (e) {\n        logError(\"[TitleScreen] Error in resize. \", e);\n      }\n    },\n    startGame() {\n      if (this.showFadeScreen || this.startButtonClicked) {\n        return;\n      }\n\n      this.startButtonClicked = true;\n      this.showFadeScreen = true;\n      this.kancolleStartLine.play();\n      window.setTimeout(() => {\n        window.dispatchEvent(new CustomEvent(\"startGame\"));\n      }, 2000);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.title-screen {\n  position: relative;\n  height: 100%;\n  width: 100%;\n\n  .background-image {\n    pointer-events: none;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .title-foreground {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n\n    .title-foreground-center-container {\n      justify-content: center;\n    }\n\n    .start-button {\n      img {\n        min-width: 300px;\n      }\n\n      &.min-mode {\n        margin: 10 0;\n\n        img {\n          min-width: 0px;\n        }\n      }\n    }\n\n    .title-logo-wrapper {\n      display: flex;\n      justify-content: center;\n      width: 100%;\n    }\n\n    .title-logo {\n      min-width: 300px;\n      width: 100%;\n\n      &.min-mode {\n        min-width: 0px;\n      }\n    }\n  }\n\n  .disclaimer-container {\n    pointer-events: none;\n    position: absolute;\n    bottom: 2%;\n    left: 0px;\n    max-width: 100%;\n    width: 100%;\n\n    .disclaimer {\n      pointer-events: none;\n      text-align: center;\n      margin: 0px 10px;\n      font-size: 0.7em; //2vmin;\n      word-wrap: break-word;\n      width: 100%;\n\n      padding: 5px;\n      color: rgba(0, 0, 0, 0.7);\n    }\n\n    &.min-mode {\n      display: none;\n    }\n  }\n\n  .fade-out-screen {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    opacity: 0;\n    transition: opacity 2s ease-out;\n    background-color: black;\n\n    &.show {\n      opacity: 1;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TitleScreen.vue?vue&type=template&id=3dd46a51&scoped=true&\"\nimport script from \"./TitleScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./TitleScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TitleScreen.vue?vue&type=style&index=0&id=3dd46a51&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3dd46a51\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"app\">\n    <TitleScreen v-if=\"titleScreen\" />\n    <div v-else class=\"app-contents\">\n      <Room>\n        <Ship />\n      </Room>\n      <div class=\"ui-container center-div\">\n        <UILayer />\n      </div>\n    </div>\n    <LoadingScreen v-show=\"loadingScreen\" />\n  </div>\n</template>\n\n<script>\nimport Room from \"./components/Room.vue\";\nimport Ship from \"./components/Ship.vue\";\nimport UILayer from \"./components/UILayer.vue\";\nimport LoadingScreen from \"./components/LoadingScreen.vue\";\nimport TitleScreen from \"./components/TitleScreen.vue\";\n\nexport default {\n  name: \"App\",\n  components: {\n    Room,\n    Ship,\n    UILayer,\n    LoadingScreen,\n    TitleScreen\n  },\n  data() {\n    return {\n      titleScreen: true,\n      loadingScreen: false,\n\n      roomLoaded: false,\n      shipLoaded: false,\n      lineEnded: false,\n    };\n  },\n  created() {\n    this.$store.dispatch(\"loadSettings\");\n    this.$store.dispatch(\"populateData\");\n    this.$store.dispatch(\"startEventListeners\");\n    this.$store.dispatch(\"startIntervalTimer\");\n    window.addEventListener(\"startGame\", this.exitTitleScreen);\n    window.addEventListener(\"startLoad\", this.startLoad);\n    window.addEventListener(\"endLoad\", this.endLoad);\n  },\n  beforeDestroy() {\n    // Unregister the event listener before destroying this Vue instance\n    window.removeEventListener(\"startGame\", this.exitTitleScreen);\n    window.removeEventListener(\"startLoad\", this.startLoad);\n    window.removeEventListener(\"endLoad\", this.endLoad);\n  },\n  methods: {\n    onLoad(item) {\n      console.log(`[App] ${item} loaded`);\n      switch(item) {\n        case \"room\": \n          this.roomLoaded = true;\n          break;\n        case \"ship\": \n          this.shipLoaded = true;\n          break;\n        case \"lineEnd\": \n          this.lineEnded = true;\n          break;\n        default:\n          break;\n      }\n      if (this.roomLoaded && this.shipLoaded && this.lineEnded) {\n        console.log(\"[App] Loading complete.\");\n        window.removeEventListener(\"roomLoaded\", this.onRoomLoad);\n        window.removeEventListener(\"shipLoaded\", this.onShipLoad);\n        window.removeEventListener(\"loadLineEnded\", this.onLoadLineEnded);\n        \n        window.dispatchEvent(new CustomEvent(\"showFadeScreen\"));\n        window.setTimeout(() => {\n          window.dispatchEvent(new CustomEvent(\"endLoad\"));\n          this.$store.dispatch(\"preloadShipCards\");\n        }, 500);\n      }\n    },\n    onRoomLoad() {\n      this.onLoad(\"room\")\n    },\n    onShipLoad() {\n      this.onLoad(\"ship\")\n    },\n    onLoadLineEnded() {\n      this.onLoad(\"lineEnd\")\n    },\n    exitTitleScreen() {\n      this.startLoad();\n      window.addEventListener(\"roomLoaded\", this.onRoomLoad);\n      window.addEventListener(\"shipLoaded\", this.onShipLoad);\n      window.addEventListener(\"loadLineEnded\", this.onLoadLineEnded);\n\n      this.titleScreen = false;\n      window.dispatchEvent(new CustomEvent(\"playLoadLine\")); // Only play when entering game after title screen\n    },\n    startLoad() {\n      this.$store.commit(\"setLoadingMode\", true);\n      this.loadingScreen = true;\n    },\n    endLoad() {\n      this.loadingScreen = false;\n      this.$store.commit(\"setLoadingMode\", false);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.app {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  //text-align: center;\n  //color: #2c3e50;\n  //margin-top: 60px;\n\n  .app-contents {\n    position: relative;\n    height: 100%;\n    width: 100%;\n    display: flex;\n  }\n\n  .ui-container {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    z-index: 100;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=46818a79&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=46818a79&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46818a79\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nimport './lib/preload';\nimport utils from './lib/utils';\nimport path from \"path\";\n\nVue.config.productionTip = false;\nVue.use(Vuex);\n\n// Database import\nimport bgm from './database/bgm.json'\nimport se from './database/se.json'\nimport titleLines from './database/title.json'\n\nimport akizuki from './database/ship/akizuki.json'\nimport haguro from './database/ship/haguro.json'\nimport sendai from './database/ship/sendai.json'\nimport taigei from './database/ship/taigei.json'\nimport yamato from './database/ship/yamato.json'\n\nconst ships = [\n  akizuki,\n  haguro,\n  sendai,\n  taigei,\n  yamato,\n];\n\nvar combatModeInterval = null;\n\nconst store = new Vuex.Store({\n  modules: {\n    main: {\n      state: {\n        // Databases\n        database: {}, // Main ship database\n        shipNames: [], // The list of ship names that are available\n\n        // Subtitle/overlays\n        subtitle: null,\n        title: null,\n\n        // Selected items\n        selectedBgmName: \"Main Menu\",\n        selectedShipName: \"Yamato\",\n        selectedSpriteName: \"Yamato\",\n\n        // Overall states\n        combatMode: false, // Indicates whether the game is in combat mode\n        loadingMode: false, // Indicates whether the game is loading\n        damagedMode: false, // Indicates whether the ship is damaged\n\n        // Volume settings\n        overallVolume: 0.2,\n        bgmVolume: 0.5,\n        seVolume: 0.2,\n        voiceVolume: 1.0,\n\n        overallVolumeMute: false,\n        bgmVolumeMute: false,\n        seVolumeMute: false,\n        voiceVolumeMute: false,\n\n        // Ship settings\n        idleLineWait: 5,\n        useAllModelLines: false,\n        useIdleLines: true,\n        useSpecialLines: false, // Whether the special occasion lines can be heard\n        useSpecialLinesOnly: false, // Whether only the special occasion lines will be heard\n        useBonusLines: false, // Whether only the TapBonus and IdleBonus lines will be heard\n      },\n      getters: {\n        database: s => JSON.parse(JSON.stringify(s.database)),\n        BGMs: () => JSON.parse(JSON.stringify(bgm.Events)),\n        SEs: () => JSON.parse(JSON.stringify(se)),\n        titleLines: () => JSON.parse(JSON.stringify(titleLines)),\n        shipNames: s => JSON.parse(JSON.stringify(s.shipNames)),\n\n        combatMode: s => JSON.parse(JSON.stringify(s.combatMode)),\n        loadingMode: s => JSON.parse(JSON.stringify(s.loadingMode)),\n        damagedMode: s => JSON.parse(JSON.stringify(s.damagedMode)),\n\n        bgmCategories: () => JSON.parse(JSON.stringify(bgm.Categories)),\n        bgmCategoryOrder: () => JSON.parse(JSON.stringify(bgm.CategoryOrder)),\n\n        selectedBgm: s => s.selectedBgmName ? JSON.parse(JSON.stringify(bgm.Events[s.selectedBgmName])) : null,\n        selectedShipName: s => JSON.parse(JSON.stringify(s.selectedShipName)),\n        selectedSpriteName: s => JSON.parse(JSON.stringify(s.selectedSpriteName)),\n\n        subtitle: s => JSON.parse(JSON.stringify(s.subtitle)),\n        title: s => JSON.parse(JSON.stringify(s.title)),\n\n        bgmVolume: s => s.overallVolumeMute || s.bgmVolumeMute ? 0 : s.bgmVolume * s.overallVolume,\n        seVolume: s => s.overallVolumeMute || s.seVolumeMute ? 0 : s.seVolume * s.overallVolume,\n        voiceVolume: s => s.overallVolumeMute || s.voiceVolumeMute ? 0 : s.voiceVolume * s.overallVolume,\n\n        idleLineWait: s => JSON.parse(JSON.stringify(s.idleLineWait)),\n\n        useIdleLines: s => JSON.parse(JSON.stringify(s.useIdleLines)),\n        useSpecialLines: s => JSON.parse(JSON.stringify(s.useSpecialLines)),\n        useSpecialLinesOnly: s => JSON.parse(JSON.stringify(s.useSpecialLinesOnly)),\n        useBonusLines: s => JSON.parse(JSON.stringify(s.useBonusLines)),\n        useAllModelLines: s => JSON.parse(JSON.stringify(s.useAllModelLines)),\n\n        disclaimer: () => \"This app is free and for private use only. No shipgirls can be hurt during the running of this app. They are just pretending.\"\n      },\n      mutations: {\n        // set databases\n        setDatabase(s, database) {\n          s.database = database;\n        },\n        setShipNames(s, shipNames) {\n          s.shipNames = shipNames;\n        },\n        setCombatMode(s, combatMode) {\n          // Expects input of the end time\n\n          if (combatMode) {\n            try {\n              let dateTime = new Date(combatMode);\n              if (combatMode && dateTime > new Date()) {\n                s.combatMode = combatMode;\n                utils.saveSetting(\"combatMode\", combatMode);\n\n                let timeLeft = dateTime.getTime() - new Date().getTime();\n                combatModeInterval = window.setInterval(() => {\n                  s.combatMode = null;\n                  window.dispatchEvent(new CustomEvent(\"battleEnd\"));\n                }, timeLeft);\n                log('Time left until Combat ends: ', timeLeft);\n              }\n            } catch (e) {\n              combatMode = null;\n              log(\"[setCombatMode] Error. \", e);\n            }\n          }\n\n          if (!combatMode) {\n            s.combatMode = null;\n            utils.saveSetting(\"combatMode\", null);\n            if (combatModeInterval) {\n              window.clearInterval(combatModeInterval);\n            }\n          }\n        },\n        setLoadingMode(s, loadingMode) {\n          s.loadingMode = loadingMode;\n        },\n        setDamagedMode(s, damagedMode) {\n          log(\"setDamagedMode\", damagedMode);\n          s.damagedMode = damagedMode;\n        },\n        // Set the title subtitle\n        setTitle(s, title) {\n          s.title = title;\n        },\n        setSubtitle(s, subtitle) {\n          s.subtitle = subtitle;\n        },\n        setSelectedBgmName(s, selectedBgmName) {\n          utils.saveSetting(\"selectedBgmName\", selectedBgmName);\n          s.selectedBgmName = selectedBgmName;\n        },\n        setSelectedBgm(s, selectedBgm) {\n          utils.saveSetting(\"selectedBgmName\", selectedBgm.Source);\n          s.selectedBgmName = selectedBgm.Source;\n        },\n        setSelectedShipName(s, selectedShipName) {\n          utils.saveSetting(\"selectedShipName\", selectedShipName);\n          s.selectedShipName = selectedShipName;\n        },\n        setSelectedSpriteName(s, selectedSpriteName) {\n          utils.saveSetting(\"selectedSpriteName\", selectedSpriteName);\n          s.selectedSpriteName = selectedSpriteName;\n        },\n        // Set volume\n        setOverallVolume(s, overallVolume) {\n          utils.saveSetting(\"overallVolume\", overallVolume);\n          s.overallVolume = overallVolume;\n        },\n        setBgmVolume(s, bgmVolume) {\n          utils.saveSetting(\"bgmVolume\", bgmVolume);\n          s.bgmVolume = bgmVolume;\n        },\n        setSeVolume(s, seVolume) {\n          utils.saveSetting(\"seVolume\", seVolume);\n          s.seVolume = seVolume;\n        },\n        setVoiceVolume(s, voiceVolume) {\n          utils.saveSetting(\"voiceVolume\", voiceVolume);\n          s.voiceVolume = voiceVolume;\n        },\n        // Set mute\n        setOverallVolumeMute(s, overallVolumeMute) {\n          utils.saveSetting(\"overallVolumeMute\", overallVolumeMute);\n          s.overallVolumeMute = overallVolumeMute;\n        },\n        setBgmVolumeMute(s, bgmVolumeMute) {\n          utils.saveSetting(\"bgmVolumeMute\", bgmVolumeMute);\n          s.bgmVolumeMute = bgmVolumeMute;\n        },\n        setSeVolumeMute(s, seVolumeMute) {\n          utils.saveSetting(\"seVolumeMute\", seVolumeMute);\n          s.seVolumeMute = seVolumeMute;\n        },\n        setVoiceVolumeMute(s, voiceVolumeMute) {\n          utils.saveSetting(\"voiceVolumeMute\", voiceVolumeMute);\n          s.voiceVolumeMute = voiceVolumeMute;\n        },\n        // Set Ship settings\n        setIdleLineWait(s, idleLineWait) {\n          utils.saveSetting(\"idleLineWait\", idleLineWait);\n          s.idleLineWait = idleLineWait;\n        },\n        setUseIdleLines(s, useIdleLines) {\n          utils.saveSetting(\"useIdleLines\", useIdleLines);\n          s.useIdleLines = useIdleLines;\n        },\n        setUseSpecialLines(s, useSpecialLines) {\n          utils.saveSetting(\"useSpecialLines\", useSpecialLines);\n          s.useSpecialLines = useSpecialLines;\n        },\n        setUseSpecialLinesOnly(s, useSpecialLinesOnly) {\n          utils.saveSetting(\"useSpecialLinesOnly\", useSpecialLinesOnly);\n          s.useSpecialLinesOnly = useSpecialLinesOnly;\n        },\n        setUseAllModelLines(s, useAllModelLines) {\n          utils.saveSetting(\"useAllModelLines\", useAllModelLines);\n          s.useAllModelLines = useAllModelLines;\n        },\n        setUseBonusLines(s, useBonusLines) {\n          utils.saveSetting(\"useBonusLines\", useBonusLines);\n          s.useBonusLines = useBonusLines;\n        }\n      },\n      actions: {\n        loadSettings: s => {\n          let setters = [\n            \"setSelectedBgmName\",\n            \"setSelectedShipName\",\n            \"setSelectedSpriteName\",\n\n            \"setOverallVolume\",\n            \"setBgmVolume\",\n            \"setSeVolume\",\n            \"setVoiceVolume\",\n\n            \"setOverallVolumeMute\",\n            \"setBgmVolumeMute\",\n            \"setSeVolumeMute\",\n            \"setVoiceVolumeMute\",\n\n            \"setIdleLineWait\",\n            \"setUseIdleLines\",\n            \"setUseSpecialLines\",\n            \"setUseSpecialLinesOnly\",\n            \"setUseBonusLines\",\n            \"setUseAllModelLines\",\n\n            \"setCombatMode\",\n            \"setDamagedMode\",\n          ];\n          let variableName = [\n            \"selectedBgmName\",\n            \"selectedShipName\",\n            \"selectedSpriteName\",\n\n            \"overallVolume\",\n            \"bgmVolume\",\n            \"seVolume\",\n            \"voiceVolume\",\n\n            \"overallVolumeMute\",\n            \"bgmVolumeMute\",\n            \"seVolumeMute\",\n            \"voiceVolumeMute\",\n\n            \"idleLineWait\",\n            \"useIdleLines\",\n            \"useSpecialLines\",\n            \"useSpecialLinesOnly\",\n            \"useBonusLines\",\n            \"useAllModelLines\",\n\n            \"combatMode\",\n            \"damagedMode\",\n          ];\n\n          if (setters.length != variableName.length) {\n            logError(`[store] Setter length (${setters.length}) and variableName length (${variableName.length}) are different.`);\n          }\n\n          let length = setters.length;\n\n          for (let i = 0; i < length; i++) {\n            let loadedData = utils.loadSetting(variableName[i]);\n            if (loadedData != null) {\n              log(`Setting [${variableName[i]}]:`, loadedData);\n              s.commit(setters[i], loadedData);\n            }\n          }\n        },\n        populateData: s => {\n          //\n          // Populate the ships\n          //\n          let shipNames = [];\n          let database = {};\n          ships.map(ship => {\n            try {\n              let databaseData = JSON.parse(JSON.stringify(ship));\n              let shipName = databaseData.Name;\n              shipNames.push(shipName);\n              database[shipName] = databaseData;\n            } catch (e) {\n              window.logError(`[populateData] Unable to read ship database`, e);\n            }\n          });\n          log(\"ShipNames\", shipNames);\n\n          s.commit('setDatabase', database);\n          s.commit('setShipNames', shipNames);\n\n          window.log('Ship data', database);\n          window.log('Bgm data', bgm);\n          window.log('SE data', se);\n          window.log('Title data', titleLines);\n        },\n        loadImage: (s, { imagePath, postLoad }) => {\n          return new Promise(resolve => {\n            try {\n              let image = new Image();\n              image.onload = () => {\n                if (postLoad && typeof postLoad === 'function') postLoad();\n                resolve(image);\n              };\n              image.onerror = (e) => {\n                console.warn('[loadImage] onerror', e);\n                resolve(null);\n              }\n              image.src = imagePath;\n            } catch (e) {\n              console.warn('[loadImage] Error', e);\n              resolve(null);\n            }\n          });\n        },\n        loadAudio: (s, { audioPath, postLoad }) => {\n          return new Promise(resolve => {\n            try {\n              const audio = new Audio();\n              audio.oncanplaythrough = () => {\n                if (postLoad && typeof postLoad === 'function') postLoad();\n                resolve(audio);\n              };\n              audio.onerror = (e) => {\n                console.warn('[loadAudio] onerror', e);\n                resolve(null);\n              }\n              audio.src = audioPath;\n            } catch (e) {\n              console.warn('[loadAudio] Error', e);\n              resolve(null);\n            }\n          });\n        },\n        invokeHourlyEvent: () => {\n          let hour = new Date().getHours();\n          let hourly = new CustomEvent('hourly', { detail: `${hour.pad(2)}:00` });\n          window.dispatchEvent(hourly);\n        },\n        startIntervalTimer: s => {\n          var previousHour = new Date().getHours();\n          window.setInterval(() => {\n            // Check this every second\n            let currentHour = new Date().getHours();\n            if (currentHour !== previousHour) {\n              previousHour = currentHour;\n              s.dispatch('invokeHourlyEvent');\n            }\n          }, 1000);\n        },\n        startEventListeners() {\n          return null;\n        },\n        getDatabase: (s, shipName) => {\n          try {\n            return s.rootState.main.database[shipName];\n          } catch (e) {\n            window.logError(`Unable to get database for [${shipName}]`, e);\n          }\n        },\n        preloadShipCards: s => {\n          // Preload ship cards\n          ships.map(ship => {\n            try {\n              let shipFileName = ship.FileName;\n              let defaultBanner = ship.DefaultBanner;\n              let spritesList = Object.keys(ship.Sprites);\n              spritesList.forEach(spriteName => {\n                if (!ship.Sprites[spriteName]) { return; }\n                let card = ship.Sprites[spriteName].Card;\n                if (!card) { return; }\n                let imagePath = path.join(window.__ship, shipFileName, \"sprites\", card);\n                s.dispatch(\"loadImage\", {\n                  imagePath,\n                  postLoad: () => {\n                    console.log(`[preloadShipCards] Loaded ${card}`);\n                  },\n                });\n\n                if (defaultBanner == spriteName) {\n                  let banner = ship.Sprites[spriteName].Banner;\n                  if (banner) {\n                    let bannerPath = path.join(window.__ship, shipFileName, \"sprites\", banner);\n                    s.dispatch(\"loadImage\", {\n                      imagePath: bannerPath,\n                      postLoad: () => {\n                        console.log(`[preloadShipCards] Loaded ${banner}`);\n                      },\n                    });\n                  }\n                }\n              });\n            } catch (e) {\n              console.warn(`[preloadShipCards][${ship.Name}] Error`, e);\n            }\n          });\n        },\n      },\n    }\n  },\n});\n\nexport default store;","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport App from './App.vue';\nimport store from './store';\n//require(`../public/include`);\n\nimport './style.less';\n\nVue.config.productionTip = false;\nVue.use(Vuex);\n\nnew Vue({\n  store,\n  render: h => h(App),\n}).$mount('#app');\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=46818a79&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ship.vue?vue&type=style&index=0&id=4603c956&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingScreen.vue?vue&type=style&index=0&id=2e72b635&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleScreen.vue?vue&type=style&index=0&id=3dd46a51&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=style&index=0&id=7c00ac38&lang=less&scoped=true&\"","const fs = require('fs');\n\n\nfunction deleteAllRecursive(dirpath) {\n  if (fs.existsSync(dirpath)) {\n    /* Old unneeded code\n    fs.readdirSync(dirpath).forEach(file => {\n      var curPath = path.join(dirpath, file);\n      try {\n        if (fs.lstatSync(curPath).isDirectory()) deleteAllRecursive(curPath);\n        else fs.unlinkSync(curPath);\n      } catch (e) {\n        console.warn(e);\n      }\n    });\n    //*/\n    fs.rmdirSync(dirpath, {\n      recursive: true,\n    });\n  }\n}\n\nfunction saveSetting(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\nfunction loadSetting(key) {\n  try {\n    return JSON.parse(localStorage.getItem(key));\n  } catch (e) {\n    logError(\"[saveSetting] Error\", e);\n    return null;\n  }\n}\n\nmodule.exports = {\n  deleteAllRecursive,\n  loadSetting,\n  saveSetting,\n};","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShipAssigner.vue?vue&type=style&index=0&id=4907069f&lang=less&scoped=true&\""],"sourceRoot":""}